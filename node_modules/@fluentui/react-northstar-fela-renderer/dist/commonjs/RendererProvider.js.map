{"version":3,"file":"RendererProvider.js","names":["_felaDom","require","React","_interopRequireWildcard","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","obj","__esModule","default","cache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","hasDOM","renderer","targetDocument","document","doc","createElement","hasServerRenderedStyle","querySelectorAll","length","RendererProvider","_React$Component","_inheritsLoose2","props","_this","_renderStyle","_proto","componentDidUpdate","prevProps","_this$props","shouldRehydrate","rehydrate","render","Fragment","children","Component","exports"],"sources":["RendererProvider.tsx"],"sourcesContent":["import { render, rehydrate } from 'fela-dom';\nimport * as React from 'react';\n\nimport { FelaRenderer } from './types';\n\n// Copied from https://github.com/robinweser/fela/blob/master/packages/fela-bindings/src/RendererProviderFactory.js\n\nfunction hasDOM(renderer: FelaRenderer, targetDocument: Document | undefined) {\n  // ensure we're on a browser by using document since window is defined in e.g. React Native\n  // see https://github.com/robinweser/fela/issues/736\n  if (typeof document === 'undefined') {\n    return false;\n  }\n\n  const doc = targetDocument || document;\n\n  return renderer && doc && doc.createElement;\n}\n\nfunction hasServerRenderedStyle(targetDocument = document) {\n  return targetDocument.querySelectorAll('[data-fela-type]').length > 0;\n}\n\ntype RendererProviderProps = {\n  renderer: FelaRenderer;\n  rehydrate?: boolean;\n  targetDocument?: Document;\n};\n\n// Typings provided by \"fela\" package are outdated, this overrides provides proper definition\ndeclare module 'fela-dom' {\n  function render(renderer: FelaRenderer, targetDocument?: Document): void;\n  function rehydrate(renderer: FelaRenderer, targetDocument?: Document): void;\n}\n\nexport class RendererProvider extends React.Component<RendererProviderProps, Record<string, unknown>> {\n  constructor(props: RendererProviderProps) {\n    super(props);\n    this._renderStyle();\n  }\n\n  componentDidUpdate(prevProps: RendererProviderProps) {\n    if (prevProps.renderer !== this.props.renderer) {\n      // add warning that renderer is changed\n      this._renderStyle();\n    }\n  }\n\n  _renderStyle() {\n    const { renderer, rehydrate: shouldRehydrate, targetDocument } = this.props;\n\n    if (hasDOM(renderer, targetDocument)) {\n      if (shouldRehydrate && hasServerRenderedStyle(targetDocument)) {\n        rehydrate(renderer, targetDocument);\n      } else {\n        render(renderer, targetDocument);\n      }\n    }\n  }\n\n  render() {\n    return <>{this.props.children}</>;\n  }\n}\n"],"mappings":"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"}