{"version":3,"file":"useAnimationStyles.js","names":["animationCache","WeakMap","animationClassName","useAnimationStyles","displayName","props","useFluentContext","theme","rtl","disableAnimations","renderer","performance","className","animationDuration","animationDelay","animation","name","keyframeParams","duration","delay","iterationCount","direction","fillMode","playState","timingFunction","cacheEnabled","enableStylesCaching","cachePerTheme","cacheKey","has","set","get","JSON","stringify","getStyles","allDisplayNames","primaryDisplayName","componentProps","inlineStylesProps","styles","createAnimationStyles","enableSanitizeCssPlugin","enableVariablesCaching","enableBooleanVariablesCaching","saveDebug","telemetry","undefined","classes","result","root"],"sources":["components/Animation/useAnimationStyles.ts"],"sourcesContent":["import {\n  ComponentAnimationProp,\n  unstable_getStyles as getStyles,\n  unstable_createAnimationStyles as createAnimationStyles,\n  useFluentContext,\n} from '@fluentui/react-bindings';\nimport { ThemePrepared } from '@fluentui/styles';\n\nimport * as _ from 'lodash';\nimport { AnimationProps } from './Animation';\n\ntype UseAnimationStylesResult = {\n  className: string;\n  animationDuration?: string;\n  animationDelay?: string;\n};\n\nconst animationCache = new WeakMap<ThemePrepared, Record<string, UseAnimationStylesResult>>();\nexport const animationClassName = 'ui-animation';\n\nexport const useAnimationStyles = (displayName: string, props: AnimationProps): UseAnimationStylesResult => {\n  const { theme, rtl, disableAnimations, renderer, performance } = useFluentContext();\n\n  if (disableAnimations) {\n    return {\n      className: animationClassName,\n      animationDuration: '0ms',\n      animationDelay: '0ms',\n    };\n  }\n\n  const animation: ComponentAnimationProp = {\n    name: props.name,\n    keyframeParams: props.keyframeParams,\n    duration: props.duration,\n    delay: props.delay,\n    iterationCount: props.iterationCount,\n    direction: props.direction,\n    fillMode: props.fillMode,\n    playState: props.playState,\n    timingFunction: props.timingFunction,\n  };\n\n  const cacheEnabled = performance.enableStylesCaching;\n\n  let cachePerTheme = {};\n  let cacheKey = '';\n\n  if (cacheEnabled) {\n    if (!animationCache.has(theme)) {\n      animationCache.set(theme, {});\n    }\n\n    cachePerTheme = animationCache.get(theme);\n    cacheKey = JSON.stringify(animation);\n\n    if (cachePerTheme[cacheKey]) {\n      return cachePerTheme[cacheKey];\n    }\n  }\n\n  const { classes, styles } = getStyles({\n    allDisplayNames: [displayName],\n    className: animationClassName,\n    primaryDisplayName: displayName,\n    componentProps: {},\n    inlineStylesProps: {\n      styles: createAnimationStyles(animation, theme),\n    },\n\n    disableAnimations,\n    renderer,\n    rtl,\n    performance: {\n      enableSanitizeCssPlugin: false,\n      enableStylesCaching: false,\n      enableVariablesCaching: false,\n      enableBooleanVariablesCaching: false,\n    },\n    saveDebug: _.noop,\n    theme,\n    telemetry: undefined,\n  });\n\n  const result: UseAnimationStylesResult = {\n    className: classes.root,\n    animationDuration: styles.root.animationDuration as string,\n    animationDelay: styles.root.animationDelay as string,\n  };\n\n  if (cacheEnabled) {\n    cachePerTheme[cacheKey] = result;\n    animationCache.set(theme, cachePerTheme);\n  }\n\n  return result;\n};\n"],"mappings":"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"}