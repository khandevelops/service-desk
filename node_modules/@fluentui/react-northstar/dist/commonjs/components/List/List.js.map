{"version":3,"file":"List.js","names":["listClassName","List","React","forwardRef","props","ref","context","useFluentContext","useTelemetry","displayName","telemetry","setStart","setEnd","accessibility","as","children","className","debug","design","horizontal","items","navigable","selectable","styles","truncateContent","truncateHeader","variables","wrap","useAutoControlled","defaultValue","defaultSelectedIndex","value","selectedIndex","initialValue","setSelectedIndex","getA11Props","useAccessibility","debugName","mapPropsToBehavior","rtl","useStyles","mapPropsToStyles","isListTag","mapPropsToInlineStyles","classes","latestProps","useRef","current","ElementType","getElementType","unhandledProps","useUnhandledProps","handledProps","hasContent","childrenExist","length","onItemClick","useCallback","e","itemIndex","childProps","renderItems","item","index","ListItem","create","defaultProps","element","unstable_wrapWithFocusZone","root","rtlTextContainer","getAttributes","forElements","listBehavior","propTypes","commonPropTypes","createCommon","content","PropTypes","bool","customPropTypes","collectionShorthand","every","disallow","number","onSelectedIndexChange","func","Object","keys","Item","ItemContent","ListItemContent","ItemContentMedia","ListItemContentMedia","ItemEndMedia","ListItemEndMedia","ItemHeader","ListItemHeader","ItemHeaderMedia","ListItemHeaderMedia","ItemMedia","ListItemMedia","createShorthandFactory","Component","mappedArrayProp"],"sources":["components/List/List.tsx"],"sourcesContent":["import { Accessibility, listBehavior, ListBehaviorProps } from '@fluentui/accessibility';\nimport {\n  getElementType,\n  useUnhandledProps,\n  useAccessibility,\n  useAutoControlled,\n  useFluentContext,\n  useStyles,\n  useTelemetry,\n  ForwardRefWithAs,\n} from '@fluentui/react-bindings';\nimport * as customPropTypes from '@fluentui/react-proptypes';\nimport * as _ from 'lodash';\nimport * as PropTypes from 'prop-types';\nimport * as React from 'react';\n\nimport { ComponentEventHandler, ShorthandCollection, ReactChildren, FluentComponentStaticProps } from '../../types';\nimport {\n  childrenExist,\n  UIComponentProps,\n  ChildrenComponentProps,\n  commonPropTypes,\n  rtlTextContainer,\n  createShorthandFactory,\n} from '../../utils';\nimport { ListContextProvider, ListContextValue } from './listContext';\nimport { ListItem, ListItemProps } from './ListItem';\nimport { ListItemContent } from './ListItemContent';\nimport { ListItemContentMedia } from './ListItemContentMedia';\nimport { ListItemEndMedia } from './ListItemEndMedia';\nimport { ListItemHeader } from './ListItemHeader';\nimport { ListItemHeaderMedia } from './ListItemHeaderMedia';\nimport { ListItemMedia } from './ListItemMedia';\n\nexport interface ListProps extends UIComponentProps, ChildrenComponentProps {\n  /** Accessibility behavior if overridden by the user. */\n  accessibility?: Accessibility<ListBehaviorProps>;\n\n  /** Toggle debug mode */\n  debug?: boolean;\n\n  /** Shorthand array of props for ListItem. */\n  items?: ShorthandCollection<ListItemProps>;\n\n  /** A selectable list formats list items as possible choices. */\n  selectable?: boolean;\n\n  /** A navigable list allows user to navigate through items. */\n  navigable?: boolean;\n\n  /** Index of the currently selected item. */\n  selectedIndex?: number;\n\n  /** Initial selectedIndex value. */\n  defaultSelectedIndex?: number;\n\n  /**\n   * Event for request to change 'selectedIndex' value.\n   * @param event - React's original SyntheticEvent.\n   * @param data - All props and proposed value.\n   */\n  onSelectedIndexChange?: ComponentEventHandler<ListProps>;\n\n  /** Truncates content */\n  truncateContent?: boolean;\n\n  /** Truncates header */\n  truncateHeader?: boolean;\n\n  /** A horizontal list displays elements horizontally. */\n  horizontal?: boolean;\n\n  /** An optional wrapper function. */\n  wrap?: (children: ReactChildren) => React.ReactNode;\n}\n\nexport type ListStylesProps = Pick<ListProps, 'debug' | 'horizontal'> & { isListTag: boolean };\nexport const listClassName = 'ui-list';\n\n/**\n * A List displays a group of related sequential items.\n *\n * @accessibility\n * List may follow one of the following accessibility semantics:\n * - Static non-navigable list. Implements [ARIA list](https://www.w3.org/TR/wai-aria-1.1/#list) role.\n * - Selectable list: allows the user to select item from a list of choices. Implements [ARIA Listbox](https://www.w3.org/TR/wai-aria-practices-1.1/#Listbox) design pattern.\n * @accessibilityIssues\n * [NVDA - Browse Mode does not work with listbox #12350](https://github.com/nvaccess/nvda/issues/12350)\n * [JAWS - Listbox options are not reachable in Virtual Cursor PC mode #517](https://github.com/FreedomScientific/VFO-standards-support/issues/517)\n * [JAWS - Aria-selected is not narrated for the single-select listbox, when selection is NOT moved with focus #440](https://github.com/FreedomScientific/VFO-standards-support/issues/440)\n */\nexport const List = (React.forwardRef<HTMLUListElement, ListProps & { as: React.ReactNode }>((props, ref) => {\n  const context = useFluentContext();\n  const { setStart, setEnd } = useTelemetry(List.displayName, context.telemetry);\n  setStart();\n\n  const {\n    accessibility,\n    as,\n    children,\n    className,\n    debug,\n    design,\n    horizontal,\n    items,\n    navigable,\n    selectable,\n    styles,\n    truncateContent,\n    truncateHeader,\n    variables,\n    wrap,\n  } = props;\n\n  const [selectedIndex, setSelectedIndex] = useAutoControlled({\n    defaultValue: props.defaultSelectedIndex,\n    value: props.selectedIndex,\n    initialValue: -1,\n  });\n  const getA11Props = useAccessibility(accessibility, {\n    debugName: List.displayName,\n    mapPropsToBehavior: () => ({\n      horizontal,\n      navigable,\n      selectable,\n    }),\n    rtl: context.rtl,\n  });\n  const { classes } = useStyles<ListStylesProps>(List.displayName, {\n    className: listClassName,\n    mapPropsToStyles: () => ({ isListTag: as === 'ol' || as === 'ul', debug, horizontal }),\n    mapPropsToInlineStyles: () => ({ className, design, styles, variables }),\n    rtl: context.rtl,\n  });\n\n  const latestProps = React.useRef<ListProps>(props);\n  latestProps.current = props;\n\n  const ElementType = getElementType(props);\n  const unhandledProps = useUnhandledProps(List.handledProps, props);\n\n  const hasContent = childrenExist(children) || (items && items.length > 0);\n  const onItemClick = React.useCallback(\n    (e, itemIndex) => {\n      if (latestProps.current.selectable) {\n        setSelectedIndex(itemIndex);\n        _.invoke(latestProps.current, 'onSelectedIndexChange', e, {\n          ...latestProps.current,\n          selectedIndex: itemIndex,\n        });\n      }\n    },\n    [latestProps, setSelectedIndex],\n  );\n\n  const childProps: ListContextValue = {\n    debug,\n    navigable,\n    onItemClick,\n    selectable,\n    selectedIndex,\n    truncateContent,\n    truncateHeader,\n    variables,\n  };\n  const renderItems = () => _.map(items, (item, index) => ListItem.create(item, { defaultProps: () => ({ index }) }));\n\n  const element = getA11Props.unstable_wrapWithFocusZone(\n    <ElementType\n      {...getA11Props('root', {\n        className: classes.root,\n        ref,\n        ...rtlTextContainer.getAttributes({ forElements: [children] }),\n        ...unhandledProps,\n      })}\n    >\n      <ListContextProvider value={childProps}>\n        {hasContent && wrap(childrenExist(children) ? children : renderItems())}\n      </ListContextProvider>\n    </ElementType>,\n  );\n  setEnd();\n\n  return element;\n}) as unknown) as ForwardRefWithAs<'ul', HTMLUListElement, ListProps> &\n  FluentComponentStaticProps<ListProps> & {\n    Item: typeof ListItem;\n    ItemContent: typeof ListItemContent;\n    ItemContentMedia: typeof ListItemContentMedia;\n    ItemEndMedia: typeof ListItemEndMedia;\n    ItemHeader: typeof ListItemHeader;\n    ItemHeaderMedia: typeof ListItemHeaderMedia;\n    ItemMedia: typeof ListItemMedia;\n  };\n\nList.displayName = 'List';\n\nList.defaultProps = {\n  as: 'ul',\n  accessibility: listBehavior,\n  wrap: children => children,\n};\nList.propTypes = {\n  ...commonPropTypes.createCommon({\n    content: false,\n  }),\n  debug: PropTypes.bool,\n  items: customPropTypes.collectionShorthand,\n  selectable: customPropTypes.every([customPropTypes.disallow(['navigable']), PropTypes.bool]),\n  navigable: customPropTypes.every([customPropTypes.disallow(['selectable']), PropTypes.bool]),\n  truncateContent: PropTypes.bool,\n  truncateHeader: PropTypes.bool,\n  selectedIndex: PropTypes.number,\n  defaultSelectedIndex: PropTypes.number,\n  onSelectedIndexChange: PropTypes.func,\n  horizontal: PropTypes.bool,\n  wrap: PropTypes.func,\n};\n\nList.handledProps = Object.keys(List.propTypes) as any;\nList.Item = ListItem;\nList.ItemContent = ListItemContent;\nList.ItemContentMedia = ListItemContentMedia;\nList.ItemEndMedia = ListItemEndMedia;\nList.ItemHeader = ListItemHeader;\nList.ItemHeaderMedia = ListItemHeaderMedia;\nList.ItemMedia = ListItemMedia;\n\nList.create = createShorthandFactory({ Component: List, mappedArrayProp: 'items' });\n"],"mappings":"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"}