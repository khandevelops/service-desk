{"version":3,"file":"MenuButton.js","names":["menuButtonClassName","menuButtonSlotClassNames","menu","MenuButton","React","forwardRef","props","ref","context","useFluentContext","useTelemetry","displayName","telemetry","setStart","setEnd","contextMenu","accessibility","align","className","defaultOpen","flipBoundary","mountNode","mouseLeaveDelay","offset","on","onOpenChange","overflowBoundary","pointing","popperRef","position","positionFixed","tabbableTrigger","target","trigger","unstable_disableTether","unstable_pinned","autoSize","variables","useAutoControlled","defaultValue","value","open","initialValue","setOpen","useOnIFrameFocus","e","__","menuId","useRef","current","getOrGenerateIdFromShorthand","triggerId","triggerRef","menuRef","ElementType","getElementType","unhandledProps","useUnhandledProps","handledProps","getA11yProps","useAccessibility","debugName","actionHandlers","closeMenu","openAndFocusFirst","openAndFocus","openAndFocusLast","mapPropsToBehavior","rtl","popupProps","useStyles","mapPropsToInlineStyles","styles","classes","resolvedStyles","handleOpenChange","which","preventDefault","focusMenuItem","callback","handleMenuOverrides","predefinedProps","onItemClick","itemProps","onKeyDown","key","stopPropagation","content","Menu","create","defaultProps","vertical","overrideProps","unstable_behaviorDefinition","popupContent","children","undefined","trapFocus","inline","autoFocus","popup","Popup","element","unstable_wrapWithFocusZone","root","propTypes","commonPropTypes","createCommon","PropTypes","oneOf","ALIGNMENTS","bool","customPropTypes","domNode","number","oneOfType","func","arrayOf","object","onMenuItemClick","POSITIONS","any","every","disallow","AUTOSIZES","itemShorthandWithoutJSX","menuButtonBehavior","Object","keys","createShorthandFactory","Component","mappedProp"],"sources":["components/MenuButton/MenuButton.tsx"],"sourcesContent":["import * as React from 'react';\nimport * as PropTypes from 'prop-types';\nimport * as _ from 'lodash';\nimport { Accessibility, menuButtonBehavior, MenuButtonBehaviorProps } from '@fluentui/accessibility';\nimport { Ref } from '@fluentui/react-component-ref';\nimport * as customPropTypes from '@fluentui/react-proptypes';\n\nimport { commonPropTypes, StyledComponentProps, getOrGenerateIdFromShorthand } from '../../utils';\nimport { ShorthandValue, ComponentEventHandler, ShorthandCollection, FluentComponentStaticProps } from '../../types';\n\nimport { createShorthandFactory } from '../../utils/factories';\nimport { Popup, PopupProps, PopupEvents, PopupEventsArray } from '../Popup/Popup';\nimport { Menu, MenuProps } from '../Menu/Menu';\nimport { MenuItemProps } from '../Menu/MenuItem';\nimport { focusMenuItem } from './focusUtils';\nimport { ALIGNMENTS, POSITIONS, PositioningProps, AutoSize, AUTOSIZES } from '../../utils/positioner';\nimport {\n  useAccessibility,\n  useTelemetry,\n  getElementType,\n  useUnhandledProps,\n  useFluentContext,\n  useAutoControlled,\n  useStyles,\n  useOnIFrameFocus,\n  ForwardRefWithAs,\n} from '@fluentui/react-bindings';\n\nexport interface MenuButtonSlotClassNames {\n  menu: string;\n}\n\nexport interface MenuButtonProps extends StyledComponentProps<MenuButtonProps>, PositioningProps {\n  /**\n   * Accessibility behavior if overridden by the user.\n   * @default menuButtonBehavior\n   */\n  accessibility?: Accessibility<MenuButtonBehaviorProps>;\n\n  /** Additional CSS class name(s) to apply.  */\n  className?: string;\n\n  /** Initial value for 'open'. */\n  defaultOpen?: boolean;\n\n  /** Existing element the popup should be bound to. */\n  mountNode?: HTMLElement;\n\n  /** Delay in ms for the mouse leave event, before the popup will be closed. */\n  mouseLeaveDelay?: number;\n\n  /** Events triggering the popup. */\n  on?: PopupEvents | PopupEventsArray;\n\n  /** Defines whether popup is displayed. */\n  open?: boolean;\n\n  /**\n   * Called after user's click on a menu item.\n   *\n   * @param event - React's original SyntheticEvent.\n   * @param data - All props.\n   */\n  onMenuItemClick?: ComponentEventHandler<MenuItemProps>;\n\n  /**\n   * Event for request to change 'open' value.\n   * @param event - React's original SyntheticEvent.\n   * @param data - All props and proposed value.\n   */\n  onOpenChange?: ComponentEventHandler<PopupProps>;\n\n  /** A popup can show a pointer to trigger. */\n  pointing?: boolean;\n\n  /**\n   * DOM element that should be used as popup's target - instead of 'trigger' element that is used by default.\n   */\n  target?: HTMLElement;\n\n  /** Element to be rendered in-place where the popup is defined. */\n  trigger?: JSX.Element;\n\n  /** Whether the trigger should be tabbable */\n  tabbableTrigger?: boolean;\n\n  /** Shorthand for menu configuration */\n  menu?: ShorthandValue<MenuProps> | ShorthandCollection<MenuItemProps>;\n\n  /** Determines if the MenuButton behaves as context menu */\n  contextMenu?: boolean;\n}\n\nexport interface MenuButtonState {\n  open: boolean;\n  menuId: string;\n  triggerId: string;\n}\n\nexport const menuButtonClassName = 'ui-menubutton';\nexport const menuButtonSlotClassNames: MenuButtonSlotClassNames = {\n  menu: `${menuButtonClassName}__menu`,\n};\n\nexport type MenuButtonStylesProps = never;\n\n/**\n * A MenuButton displays a menu connected to trigger element.\n * @accessibility\n */\nexport const MenuButton = (React.forwardRef<HTMLDivElement, MenuButtonProps>((props, ref) => {\n  const context = useFluentContext();\n  const { setStart, setEnd } = useTelemetry(MenuButton.displayName, context.telemetry);\n  setStart();\n\n  const {\n    // MenuButton props:\n    contextMenu,\n    menu,\n    // Popup props:\n    accessibility,\n    align,\n    className,\n    defaultOpen,\n    flipBoundary,\n    mountNode,\n    mouseLeaveDelay,\n    offset,\n    on,\n    onOpenChange,\n    overflowBoundary,\n    pointing,\n    popperRef,\n    position,\n    positionFixed,\n    tabbableTrigger,\n    target,\n    trigger,\n    unstable_disableTether,\n    unstable_pinned,\n    autoSize,\n    variables,\n  } = props;\n\n  const [open, setOpen] = useAutoControlled({\n    defaultValue: props.defaultOpen,\n    value: props.open,\n    initialValue: false,\n  });\n\n  useOnIFrameFocus(open, context.target, (e: Event) => {\n    setOpen(__ => {\n      _.invoke(props, 'onOpenChange', e, { ...props, ...{ open: false } });\n      return false;\n    });\n  });\n\n  const menuId = React.useRef<string>();\n  menuId.current = getOrGenerateIdFromShorthand('menubutton-menu-', menu, menuId.current);\n  const triggerId = React.useRef<string>();\n  triggerId.current = getOrGenerateIdFromShorthand('menubutton-trigger-', trigger, triggerId.current);\n\n  const triggerRef = React.useRef<HTMLElement>();\n  const menuRef = React.useRef<HTMLElement>();\n\n  const ElementType = getElementType(props);\n  const unhandledProps = useUnhandledProps(MenuButton.handledProps, props);\n\n  const getA11yProps = useAccessibility<MenuButtonBehaviorProps>(accessibility, {\n    debugName: MenuButton.displayName,\n    actionHandlers: {\n      closeMenu: e => closeMenu(e),\n      openAndFocusFirst: e => openAndFocus(e, 'first'),\n      openAndFocusLast: e => openAndFocus(e, 'last'),\n    },\n    mapPropsToBehavior: () => ({\n      menuId: menuId.current,\n      triggerId: triggerId.current,\n      open,\n      trigger: props.trigger,\n      contextMenu,\n      on,\n      tabbableTrigger,\n    }),\n    rtl: context.rtl,\n  });\n\n  const popupProps: PopupProps = {\n    accessibility,\n    align,\n    defaultOpen,\n    mountNode,\n    mouseLeaveDelay,\n    flipBoundary,\n    offset,\n    on,\n    onOpenChange,\n    open,\n    overflowBoundary,\n    pointing,\n    popperRef,\n    position,\n    positionFixed,\n    tabbableTrigger,\n    target,\n    trigger,\n    unstable_disableTether,\n    unstable_pinned,\n    autoSize,\n  };\n\n  const { classes, styles: resolvedStyles } = useStyles<MenuButtonStylesProps>(MenuButton.displayName, {\n    className: menuButtonClassName,\n    mapPropsToInlineStyles: () => ({\n      className,\n      styles: props.styles,\n      variables,\n    }),\n    rtl: context.rtl,\n  });\n\n  const closeMenu = (e: React.KeyboardEvent) => {\n    handleOpenChange(e, false);\n  };\n\n  const openAndFocus = (e: React.KeyboardEvent, which: 'first' | 'last') => {\n    e.preventDefault();\n    handleOpenChange(e, true, () => menuRef.current && focusMenuItem(menuRef.current, which));\n  };\n\n  const handleOpenChange = (e: React.SyntheticEvent, open: boolean, callback?: () => void) => {\n    _.invoke(props, 'onOpenChange', e, { ...props, open });\n    setOpen(open);\n    callback && callback();\n  };\n\n  const handleMenuOverrides = (predefinedProps: MenuProps) => ({\n    onItemClick: (e: React.SyntheticEvent, itemProps: MenuItemProps) => {\n      _.invoke(predefinedProps, 'onItemClick', e, itemProps);\n      _.invoke(props, 'onMenuItemClick', e, itemProps);\n      if (!itemProps || !itemProps.menu) {\n        // do not close if clicked on item with submenu\n        handleOpenChange(e, false);\n      }\n    },\n    onKeyDown: (e: React.KeyboardEvent, itemProps: MenuItemProps) => {\n      _.invoke(predefinedProps, 'onKeyDown', e, itemProps);\n      if (e.key === 'ArrowLeft' || e.key === 'ArrowRight') {\n        e.stopPropagation();\n      }\n    },\n  });\n\n  const content = Menu.create(menu, {\n    defaultProps: () =>\n      getA11yProps('menu', {\n        vertical: true,\n        className: menuButtonSlotClassNames.menu,\n      }),\n    overrideProps: handleMenuOverrides,\n  });\n\n  const overrideProps: PopupProps = {\n    accessibility: getA11yProps.unstable_behaviorDefinition,\n    open,\n    onOpenChange: (e, { open }) => {\n      handleOpenChange(e, open);\n    },\n    content: {\n      styles: resolvedStyles.popupContent,\n      content: content && <Ref innerRef={menuRef}>{content}</Ref>,\n    },\n    children: undefined, // force-reset `children` defined for `Popup` as it collides with the `trigger\n    ...(contextMenu\n      ? {\n          on: 'context',\n          trapFocus: true,\n          tabbableTrigger: false,\n        }\n      : {\n          inline: true,\n          autoFocus: true,\n        }),\n  };\n\n  const popup = Popup.create(popupProps, { overrideProps });\n\n  if (contextMenu) {\n    setEnd();\n    return popup;\n  }\n\n  const element = getA11yProps.unstable_wrapWithFocusZone(\n    <ElementType\n      {...getA11yProps('root', {\n        ref,\n        className: classes.root,\n        ...unhandledProps,\n      })}\n    >\n      <Ref innerRef={triggerRef}>{popup}</Ref>\n    </ElementType>,\n  );\n  setEnd();\n  return element;\n}) as unknown) as ForwardRefWithAs<'div', HTMLDivElement, MenuButtonProps> &\n  FluentComponentStaticProps<MenuButtonProps>;\n\nMenuButton.displayName = 'MenuButton';\n\nMenuButton.propTypes = {\n  ...commonPropTypes.createCommon({\n    content: false,\n  }),\n  align: PropTypes.oneOf(ALIGNMENTS),\n  defaultOpen: PropTypes.bool,\n  mountNode: customPropTypes.domNode,\n  mouseLeaveDelay: PropTypes.number,\n  offset: PropTypes.oneOfType([\n    PropTypes.func,\n    PropTypes.arrayOf(PropTypes.number) as PropTypes.Requireable<[number, number]>,\n  ]),\n  on: PropTypes.oneOfType([\n    PropTypes.oneOf(['hover', 'click', 'focus', 'context']),\n    PropTypes.arrayOf(PropTypes.oneOf(['click', 'focus', 'context'])),\n    PropTypes.arrayOf(PropTypes.oneOf(['hover', 'focus', 'context'])),\n  ]) as any,\n  flipBoundary: PropTypes.oneOfType([\n    PropTypes.object as PropTypes.Requireable<HTMLElement>,\n    PropTypes.arrayOf(PropTypes.object) as PropTypes.Requireable<HTMLElement[]>,\n    PropTypes.oneOf<'clippingParents' | 'window' | 'scrollParent'>(['clippingParents', 'window', 'scrollParent']),\n  ]),\n  overflowBoundary: PropTypes.oneOfType([\n    PropTypes.object as PropTypes.Requireable<HTMLElement>,\n    PropTypes.arrayOf(PropTypes.object) as PropTypes.Requireable<HTMLElement[]>,\n    PropTypes.oneOf<'clippingParents' | 'window' | 'scrollParent'>(['clippingParents', 'window', 'scrollParent']),\n  ]),\n  open: PropTypes.bool,\n  onMenuItemClick: PropTypes.func,\n  onOpenChange: PropTypes.func,\n  popperRef: customPropTypes.ref,\n  position: PropTypes.oneOf(POSITIONS),\n  positionFixed: PropTypes.bool,\n  target: PropTypes.any,\n  trigger: customPropTypes.every([customPropTypes.disallow(['children']), PropTypes.any]),\n  tabbableTrigger: PropTypes.bool,\n  unstable_disableTether: PropTypes.oneOf([true, false, 'all']),\n  unstable_pinned: PropTypes.bool,\n  autoSize: PropTypes.oneOf<AutoSize>(AUTOSIZES),\n  menu: PropTypes.oneOfType([\n    customPropTypes.itemShorthandWithoutJSX,\n    PropTypes.arrayOf(customPropTypes.itemShorthandWithoutJSX),\n  ]),\n  contextMenu: PropTypes.bool,\n};\n\nMenuButton.defaultProps = {\n  accessibility: menuButtonBehavior,\n  align: 'start',\n  position: 'below',\n};\n\nMenuButton.handledProps = Object.keys(MenuButton.propTypes) as any;\n\nMenuButton.create = createShorthandFactory({ Component: MenuButton, mappedProp: 'menu' });\n"],"mappings":"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"}