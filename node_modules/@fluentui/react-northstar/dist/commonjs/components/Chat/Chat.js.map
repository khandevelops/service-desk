{"version":3,"file":"Chat.js","names":["chatClassName","chatSlotClassNames","item","Chat","React","forwardRef","props","ref","context","useFluentContext","useTelemetry","displayName","telemetry","setStart","setEnd","accessibility","children","className","density","design","items","styles","variables","getA11Props","useAccessibility","debugName","rtl","useStyles","mapPropsToStyles","mapPropsToInlineStyles","classes","ElementType","getElementType","unhandledProps","useUnhandledProps","handledProps","childBehaviors","contextProps","behaviors","message","element","unstable_wrapWithFocusZone","root","rtlTextContainer","getAttributes","forElements","childrenExist","ChatItem","create","defaultProps","chatBehavior","as","defaultChatDensity","propTypes","commonPropTypes","createCommon","content","PropTypes","arrayOf","customPropTypes","itemShorthand","oneOf","Object","keys","Item","Message","ChatMessage","MessageHeader","ChatMessageHeader","MessageDetails","ChatMessageDetails","MessageReadStatus","ChatMessageReadStatus","createShorthandFactory","Component"],"sources":["components/Chat/Chat.tsx"],"sourcesContent":["import { Accessibility, chatBehavior, ChatBehaviorProps } from '@fluentui/accessibility';\nimport {\n  ForwardRefWithAs,\n  getElementType,\n  useAccessibility,\n  useFluentContext,\n  useStyles,\n  useTelemetry,\n  useUnhandledProps,\n} from '@fluentui/react-bindings';\nimport * as customPropTypes from '@fluentui/react-proptypes';\nimport * as _ from 'lodash';\nimport * as PropTypes from 'prop-types';\nimport * as React from 'react';\n\nimport { FluentComponentStaticProps, ShorthandCollection } from '../../types';\nimport {\n  ChildrenComponentProps,\n  childrenExist,\n  commonPropTypes,\n  createShorthandFactory,\n  rtlTextContainer,\n  UIComponentProps,\n} from '../../utils';\nimport { ChatContextProvider, ChatContextValue } from './chatContext';\nimport { ChatDensity, defaultChatDensity } from './chatDensity';\nimport { ChatItem, ChatItemProps } from './ChatItem';\nimport { ChatMessage } from './ChatMessage';\nimport { ChatMessageDetails } from './ChatMessageDetails';\nimport { ChatMessageHeader } from './ChatMessageHeader';\nimport { ChatMessageReadStatus } from './ChatMessageReadStatus';\n\nexport interface ChatSlotClassNames {\n  item: string;\n}\n\nexport interface ChatProps extends UIComponentProps, ChildrenComponentProps {\n  /** Accessibility behavior if overridden by the user. */\n  accessibility?: Accessibility<ChatBehaviorProps>;\n\n  /** Chat density. */\n  density?: ChatDensity;\n\n  /** Shorthand array of the items inside the chat. */\n  items?: ShorthandCollection<ChatItemProps>;\n}\n\nexport type ChatStylesProps = Pick<ChatProps, 'density'>;\nexport const chatClassName = 'ui-chat';\nexport const chatSlotClassNames: ChatSlotClassNames = {\n  item: `${chatClassName}__item`,\n};\n\n/**\n * A Chat displays messages from a conversation between multiple users.\n */\nexport const Chat = (React.forwardRef<HTMLUListElement, ChatProps>((props, ref) => {\n  const context = useFluentContext();\n  const { setStart, setEnd } = useTelemetry(Chat.displayName, context.telemetry);\n  setStart();\n\n  const { accessibility, children, className, density, design, items, styles, variables } = props;\n\n  const getA11Props = useAccessibility(accessibility, {\n    debugName: Chat.displayName,\n    rtl: context.rtl,\n  });\n  const { classes } = useStyles<ChatStylesProps>(Chat.displayName, {\n    className: chatClassName,\n    mapPropsToStyles: () => ({ density }),\n    mapPropsToInlineStyles: () => ({\n      className,\n      design,\n      styles,\n      variables,\n    }),\n    rtl: context.rtl,\n  });\n\n  const ElementType = getElementType(props);\n  const unhandledProps = useUnhandledProps(Chat.handledProps, props);\n\n  const childBehaviors = accessibility && (accessibility as Accessibility<ChatProps>)(props).childBehaviors;\n\n  const contextProps: ChatContextValue = {\n    density,\n    behaviors: {\n      item: childBehaviors?.item,\n      message: childBehaviors?.message,\n    },\n  };\n\n  const element = getA11Props.unstable_wrapWithFocusZone(\n    <ElementType\n      {...getA11Props('root', {\n        className: classes.root,\n        ref,\n        ...rtlTextContainer.getAttributes({ forElements: [children] }),\n        ...unhandledProps,\n      })}\n    >\n      <ChatContextProvider value={contextProps}>\n        {childrenExist(children)\n          ? children\n          : _.map(items, item =>\n              ChatItem.create(item, {\n                defaultProps: () => ({ className: chatSlotClassNames.item }),\n              }),\n            )}\n      </ChatContextProvider>\n    </ElementType>,\n  );\n  setEnd();\n\n  return element;\n}) as unknown) as ForwardRefWithAs<'ul', HTMLUListElement, ChatProps> &\n  FluentComponentStaticProps<ChatProps> & {\n    Item: typeof ChatItem;\n    Message: typeof ChatMessage;\n    MessageDetails: typeof ChatMessageDetails;\n    MessageReadStatus: typeof ChatMessageReadStatus;\n    MessageHeader: typeof ChatMessageHeader;\n  };\n\nChat.displayName = 'Chat';\n\nChat.defaultProps = {\n  accessibility: chatBehavior,\n  as: 'ul',\n  density: defaultChatDensity,\n};\nChat.propTypes = {\n  ...commonPropTypes.createCommon({\n    content: false,\n  }),\n  items: PropTypes.arrayOf(customPropTypes.itemShorthand),\n  density: PropTypes.oneOf<ChatDensity>(['comfy', 'compact']),\n};\nChat.handledProps = Object.keys(Chat.propTypes) as any;\n\nChat.Item = ChatItem;\nChat.Message = ChatMessage;\nChat.MessageHeader = ChatMessageHeader;\nChat.MessageDetails = ChatMessageDetails;\nChat.MessageReadStatus = ChatMessageReadStatus;\n\nChat.create = createShorthandFactory({ Component: Chat });\n"],"mappings":"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"}