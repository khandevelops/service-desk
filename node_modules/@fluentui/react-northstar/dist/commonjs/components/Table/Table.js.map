{"version":3,"file":"Table.js","names":["tableClassName","tableSlotClassNames","header","Table","React","forwardRef","props","ref","context","useFluentContext","useTelemetry","displayName","telemetry","setStart","setEnd","children","rows","compact","accessibility","className","design","styles","variables","hasChildren","childrenExist","ElementType","getElementType","unhandledProps","useUnhandledProps","handledProps","getA11yProps","useAccessibility","debugName","rtl","useStyles","mapPropsToInlineStyles","classes","renderRows","row","TableRow","create","defaultProps","onClick","e","overrideProps","predefinedProps","mergeVariablesOverrides","renderHeader","element","unstable_wrapWithFocusZone","root","Cell","TableCell","Row","createShorthandFactory","Component","propTypes","commonPropTypes","createCommon","content","customPropTypes","itemShorthand","collectionShorthand","PropTypes","bool","Object","keys","tableBehavior"],"sources":["components/Table/Table.tsx"],"sourcesContent":["import { Accessibility, tableBehavior, TableBehaviorProps } from '@fluentui/accessibility';\nimport {\n  getElementType,\n  useTelemetry,\n  mergeVariablesOverrides,\n  useUnhandledProps,\n  useAccessibility,\n  useStyles,\n  useFluentContext,\n  ForwardRefWithAs,\n} from '@fluentui/react-bindings';\nimport * as customPropTypes from '@fluentui/react-proptypes';\nimport * as PropTypes from 'prop-types';\nimport * as _ from 'lodash';\nimport * as React from 'react';\nimport {\n  UIComponentProps,\n  ChildrenComponentProps,\n  commonPropTypes,\n  childrenExist,\n  createShorthandFactory,\n} from '../../utils';\nimport { TableRow, TableRowProps } from './TableRow';\nimport { TableCell } from './TableCell';\n\nimport { ShorthandCollection, ShorthandValue, FluentComponentStaticProps } from '../../types';\n\nexport interface TableSlotClassNames {\n  header: string;\n}\n\nexport interface TableProps extends UIComponentProps, ChildrenComponentProps {\n  /**\n   * Accessibility behavior if overridden by the user.\n   * */\n  accessibility?: Accessibility<TableBehaviorProps>;\n\n  /** The columns of the Table with a space-separated list of values.\n   */\n  header?: ShorthandValue<TableRowProps>;\n\n  /** The rows of the Table with a space-separated list of values.\n   */\n  rows?: ShorthandCollection<TableRowProps>;\n\n  /**\n   * Render table in compact mode\n   */\n  compact?: boolean;\n}\n\nexport const tableClassName = 'ui-table';\nexport const tableSlotClassNames: TableSlotClassNames = {\n  header: `${tableClassName}__header`,\n};\n\nexport type TableStylesProps = never;\n\n/**\n * A Table is used to display data in tabular layout\n * * @accessibility\n * Implements ARIA [Data Grid](https://www.w3.org/TR/wai-aria-practices/#dataGrid) design pattern for presenting tabular information.\n * When gridcell contains actionable element, use [gridCellWithFocusableElementBehavior](/components/table/accessibility#grid-cell-with-focusable-element-behavior-ts). [More information available in aria documentation.](https://www.w3.org/TR/wai-aria-practices/#gridNav_focus)\n * Use [gridCellMultipleFocusableBehavior](/components/table/accessibility#gridCellMultipleFocusableBehavior), when gridcell contains:\n * \\- editable content\n * \\- multiple actionable elements\n * \\- component that utilizes arrow keys in its navigation, like menu button, dropdown, radio group, slider, etc.\n * [More information available in aria documentation.](https://www.w3.org/TR/wai-aria-practices/#gridNav_inside)\n * @accessibilityIssues\n * [NVDA narrate table title(aria-label) twice](https://github.com/nvaccess/nvda/issues/10548)\n * [Accessibility DOM > Table > gridcell > when gridcell is focused, then selected state is send to reader](https://bugs.chromium.org/p/chromium/issues/detail?id=1030378)\n * [JAWS narrate grid name twice, once as table and second time as grid](https://github.com/FreedomScientific/VFO-standards-support/issues/346)\n * [JAWS doesn't narrate grid column name, when focus is on actionable element in the cell] (https://github.com/FreedomScientific/VFO-standards-support/issues/348)\n * [aria-sort is not output at child elements](https://github.com/FreedomScientific/VFO-standards-support/issues/319)\n * [VoiceOver not announcing rows correctly for a grid with presentation elements inside](https://bugs.chromium.org/p/chromium/issues/detail?id=1054424)\n * VoiceOver doesn't narrate aria-rowcount value in table or grid\n */\nexport const Table = (React.forwardRef<HTMLDivElement, TableProps>((props, ref) => {\n  const context = useFluentContext();\n  const { setStart, setEnd } = useTelemetry(Table.displayName, context.telemetry);\n  setStart();\n  const { children, rows, header, compact, accessibility, className, design, styles, variables } = props;\n  const hasChildren = childrenExist(children);\n  const ElementType = getElementType(props);\n  const unhandledProps = useUnhandledProps(Table.handledProps, props);\n\n  const getA11yProps = useAccessibility<TableBehaviorProps>(accessibility, {\n    debugName: Table.displayName,\n    rtl: context.rtl,\n  });\n\n  const { classes } = useStyles<TableStylesProps>(Table.displayName, {\n    className: tableClassName,\n    mapPropsToInlineStyles: () => ({\n      className,\n      design,\n      styles,\n      variables,\n    }),\n    rtl: context.rtl,\n  });\n\n  const renderRows = () => {\n    return _.map(rows, (row: TableRowProps) => {\n      return TableRow.create(row, {\n        defaultProps: () =>\n          getA11yProps('row', {\n            compact,\n            onClick: (e, props) => {\n              _.invoke(row, 'onClick', e, props);\n            },\n          }),\n        overrideProps: predefinedProps => ({\n          variables: mergeVariablesOverrides(variables, predefinedProps.variables),\n        }),\n      });\n    });\n  };\n\n  const renderHeader = () => {\n    return TableRow.create(header, {\n      defaultProps: () =>\n        getA11yProps('row', {\n          header: true,\n          compact,\n          className: tableSlotClassNames.header,\n        }),\n      overrideProps: predefinedProps => ({\n        variables: mergeVariablesOverrides(variables, predefinedProps.variables),\n      }),\n    });\n  };\n\n  const element = getA11yProps.unstable_wrapWithFocusZone(\n    <ElementType\n      {...getA11yProps('root', {\n        className: classes.root,\n        ref,\n        ...unhandledProps,\n      })}\n    >\n      {hasChildren && children}\n      {/* <thead> */}\n      {!hasChildren && renderHeader()}\n      {/* </thead> */}\n      {/* <tbody> */}\n      {!hasChildren && renderRows()}\n      {/* </tbody> */}\n    </ElementType>,\n  );\n  setEnd();\n  return element;\n}) as unknown) as ForwardRefWithAs<'div', HTMLDivElement, TableProps> &\n  FluentComponentStaticProps<TableProps> & {\n    Cell: typeof TableCell;\n    Row: typeof TableRow;\n  };\n\nTable.displayName = 'Table';\n\nTable.Cell = TableCell;\n\nTable.Row = TableRow;\n\nTable.create = createShorthandFactory({\n  Component: Table,\n});\n\nTable.propTypes = {\n  ...commonPropTypes.createCommon({\n    content: false,\n  }),\n  header: customPropTypes.itemShorthand,\n  rows: customPropTypes.collectionShorthand,\n  compact: PropTypes.bool,\n};\n\nTable.handledProps = Object.keys(Table.propTypes) as any;\n\nTable.defaultProps = {\n  accessibility: tableBehavior,\n};\n"],"mappings":"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"}