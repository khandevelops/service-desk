{"version":3,"file":"Loader.js","names":["loaderClassName","loaderSlotClassNames","indicator","label","Loader","React","forwardRef","props","ref","context","useFluentContext","useTelemetry","displayName","telemetry","setStart","setEnd","delay","secondary","inline","labelPosition","className","design","styles","variables","size","ElementType","getElementType","unhandledProps","useUnhandledProps","handledProps","delayTimer","useRef","useState","visible","setVisible","labelId","current","getOrGenerateIdFromShorthand","useStyles","mapPropsToStyles","mapPropsToInlineStyles","rtl","classes","resolvedStyles","getA11yProps","useAccessibility","accessibility","debugName","mapPropsToBehavior","useEffect","setTimeout","clearTimeout","svgElement","svg","svgTrack","svgTail","element","root","Box","create","defaultProps","children","Text","id","propTypes","commonPropTypes","createCommon","content","PropTypes","number","customPropTypes","itemShorthand","bool","oneOf","loaderBehavior","Object","keys","createShorthandFactory","Component","mappedProp","shorthandConfig"],"sources":["components/Loader/Loader.tsx"],"sourcesContent":["import { Accessibility, loaderBehavior, LoaderBehaviorProps } from '@fluentui/accessibility';\nimport * as customPropTypes from '@fluentui/react-proptypes';\nimport {\n  ShorthandConfig,\n  useTelemetry,\n  useFluentContext,\n  getElementType,\n  useUnhandledProps,\n  useStyles,\n  useAccessibility,\n  ForwardRefWithAs,\n} from '@fluentui/react-bindings';\nimport * as PropTypes from 'prop-types';\nimport * as React from 'react';\nimport {\n  createShorthandFactory,\n  UIComponentProps,\n  commonPropTypes,\n  SizeValue,\n  getOrGenerateIdFromShorthand,\n} from '../../utils';\nimport { ShorthandValue, FluentComponentStaticProps } from '../../types';\nimport { Box, BoxProps } from '../Box/Box';\nimport { Text, TextProps } from '../Text/Text';\n\nexport interface LoaderSlotClassNames {\n  indicator: string;\n  label: string;\n}\n\nexport interface LoaderProps extends UIComponentProps {\n  /** Accessibility behavior if overridden by the user. */\n  accessibility?: Accessibility<LoaderBehaviorProps>;\n\n  /** Time in milliseconds after component mount before spinner is visible. */\n  delay?: number;\n\n  /** A loader can contain an indicator. */\n  indicator?: ShorthandValue<BoxProps>;\n\n  /** Loaders can appear inline with content. */\n  inline?: boolean;\n\n  /** A loader can contain a label. */\n  label?: ShorthandValue<TextProps>;\n\n  /** A label in the loader can have different positions. */\n  labelPosition?: 'above' | 'below' | 'start' | 'end';\n\n  /** A size of the loader. */\n  size?: SizeValue;\n\n  /** A loader can contain a custom svg element. */\n  svg?: ShorthandValue<BoxProps>;\n\n  /** A loader can be secondary */\n  secondary?: boolean;\n}\n\nexport interface LoaderState {\n  visible: boolean;\n  labelId: string;\n}\n\nexport const loaderClassName = 'ui-loader';\nexport const loaderSlotClassNames: LoaderSlotClassNames = {\n  indicator: `${loaderClassName}__indicator`,\n  label: `${loaderClassName}__label`,\n};\n\nexport type LoaderStylesProps = Pick<LoaderProps, 'inline' | 'labelPosition' | 'size' | 'secondary'>;\n\n/**\n * A loader alerts a user that content is being loaded or processed and they should wait for the activity to complete.\n *\n * @accessibility\n * Implements [ARIA progressbar](https://www.w3.org/TR/wai-aria-1.1/#progressbar) role.\n */\nexport const Loader = (React.forwardRef<HTMLDivElement, LoaderProps>((props, ref) => {\n  const context = useFluentContext();\n  const { setStart, setEnd } = useTelemetry(Loader.displayName, context.telemetry);\n  setStart();\n  const {\n    delay,\n    secondary,\n    label,\n    indicator,\n    inline,\n    labelPosition,\n    className,\n    design,\n    styles,\n    variables,\n    size,\n  } = props;\n\n  const ElementType = getElementType(props);\n  const unhandledProps = useUnhandledProps(Loader.handledProps, props);\n\n  const delayTimer = React.useRef<number>();\n  const [visible, setVisible] = React.useState(props.delay === 0);\n\n  const labelId = React.useRef<string>();\n  labelId.current = getOrGenerateIdFromShorthand('loader-label-', label, labelId.current);\n\n  const { classes, styles: resolvedStyles } = useStyles<LoaderStylesProps>(Loader.displayName, {\n    className: loaderClassName,\n    mapPropsToStyles: () => ({\n      inline,\n      labelPosition,\n      size,\n      secondary,\n    }),\n    mapPropsToInlineStyles: () => ({\n      className,\n      design,\n      styles,\n      variables,\n    }),\n    rtl: context.rtl,\n  });\n\n  const getA11yProps = useAccessibility<LoaderBehaviorProps>(props.accessibility, {\n    debugName: Loader.displayName,\n    mapPropsToBehavior: () => ({\n      labelId: labelId.current,\n    }),\n    rtl: context.rtl,\n  });\n\n  React.useEffect(() => {\n    if (delay > 0) {\n      // @ts-ignore We have a collision between types from DOM and @types/node\n      delayTimer.current = setTimeout(() => {\n        setVisible(true);\n      }, delay);\n    }\n\n    return () => clearTimeout(delayTimer.current);\n  }, [delay]);\n\n  const svgElement = (\n    <svg viewBox=\"0 0 100 100\" xmlns=\"http://www.w3.org/2000/svg\" className={classes.svg}>\n      <circle className={classes.svgTrack} />\n      <circle className={classes.svgTail} />\n    </svg>\n  );\n\n  const element = visible && (\n    <ElementType\n      {...getA11yProps('root', {\n        className: classes.root,\n        ref,\n        ...unhandledProps,\n      })}\n    >\n      {Box.create(indicator, {\n        defaultProps: () =>\n          getA11yProps('indicator', {\n            children: svgElement,\n            className: loaderSlotClassNames.indicator,\n            styles: resolvedStyles.indicator,\n          }),\n      })}\n      {Text.create(label, {\n        defaultProps: () =>\n          getA11yProps('label', {\n            className: loaderSlotClassNames.label,\n            styles: resolvedStyles.label,\n            id: labelId.current,\n          }),\n      })}\n    </ElementType>\n  );\n  setEnd();\n  return element;\n}) as unknown) as ForwardRefWithAs<'div', HTMLDivElement, LoaderProps> &\n  FluentComponentStaticProps<LoaderProps> & {\n    shorthandConfig: ShorthandConfig<LoaderProps>;\n  };\n\nLoader.displayName = 'Loader';\n\nLoader.propTypes = {\n  ...commonPropTypes.createCommon({\n    children: false,\n    content: false,\n  }),\n  delay: PropTypes.number,\n  indicator: customPropTypes.itemShorthand,\n  inline: PropTypes.bool,\n  label: customPropTypes.itemShorthand,\n  labelPosition: PropTypes.oneOf(['above', 'below', 'start', 'end']),\n  size: customPropTypes.size,\n  svg: customPropTypes.itemShorthand,\n  secondary: PropTypes.bool,\n};\n\nLoader.defaultProps = {\n  accessibility: loaderBehavior,\n  delay: 0,\n  indicator: {},\n  labelPosition: 'below',\n  svg: '',\n  size: 'medium',\n};\n\nLoader.handledProps = Object.keys(Loader.propTypes) as any;\n\nLoader.create = createShorthandFactory({ Component: Loader, mappedProp: 'label' });\n\nLoader.shorthandConfig = { mappedProp: 'label' };\n"],"mappings":"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"}