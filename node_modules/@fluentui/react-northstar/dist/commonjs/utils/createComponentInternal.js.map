{"version":3,"file":"createComponentInternal.js","names":["createComponentInternal","displayName","className","shorthandPropName","defaultProps","handledProps","propTypes","actionHandlers","render","mergedDefaultProps","as","FluentComponent","props","ref","React","useRef","context","useFluentContext","isFirstRenderRef","renderComponent","concat","state","config","saveDebug","fluentUIDebug","current","deprecated_className","create","createShorthandFactory","Component","mappedProp"],"sources":["utils/createComponentInternal.ts"],"sourcesContent":["import { AccessibilityActionHandlers, useFluentContext } from '@fluentui/react-bindings';\nimport * as React from 'react';\nimport * as _ from 'lodash';\n\nimport { renderComponent, RenderResultConfig } from './renderComponent';\nimport { createShorthandFactory, ShorthandFactory } from './factories';\nimport { ObjectOf } from '../types';\n\nexport interface CreateComponentConfig<P> {\n  displayName: string;\n  className?: string;\n  shorthandPropName?: string;\n  defaultProps?: Partial<P>;\n  handledProps?: string[];\n  propTypes?: React.WeakValidationMap<P>;\n  actionHandlers?: AccessibilityActionHandlers;\n  render: (config: RenderResultConfig<P>, props: P) => React.ReactNode;\n}\n\nexport type CreateComponentReturnType<P> = React.FunctionComponent<P> & {\n  deprecated_className: string;\n  create: ShorthandFactory<P>;\n};\n\nexport const createComponentInternal = <P extends ObjectOf<any> = any>({\n  displayName = 'FluentUIComponent',\n  className = 'fluent-ui-component',\n  shorthandPropName = 'children',\n  defaultProps = {},\n  handledProps = [],\n  propTypes,\n  actionHandlers,\n  render,\n}: CreateComponentConfig<P>): CreateComponentReturnType<P> => {\n  const mergedDefaultProps = {\n    as: 'div',\n    ...(defaultProps as any),\n  };\n\n  const FluentComponent: CreateComponentReturnType<P> = (props): React.ReactElement<P> => {\n    // Stores debug information for component.\n    // Note that this ref should go as the first one, to be discoverable by debug utils.\n    const ref = React.useRef(null);\n\n    const context = useFluentContext();\n    const isFirstRenderRef = React.useRef<boolean>(true);\n\n    return renderComponent(\n      {\n        className,\n        displayName,\n        handledProps: _.keys(propTypes).concat(handledProps),\n        props,\n        state: {},\n        actionHandlers,\n        render: config => render(config, props),\n        saveDebug: fluentUIDebug => (ref.current = { fluentUIDebug }),\n        isFirstRenderRef,\n      },\n      context,\n    );\n  };\n\n  FluentComponent.deprecated_className = className;\n\n  FluentComponent.create = createShorthandFactory({\n    Component: mergedDefaultProps.as,\n    mappedProp: shorthandPropName,\n  });\n\n  FluentComponent.displayName = displayName;\n\n  FluentComponent.propTypes = propTypes; // TODO: generate prop types\n\n  FluentComponent.defaultProps = mergedDefaultProps;\n\n  return FluentComponent;\n};\n"],"mappings":";;;;;;AAAA;AACA;AAGA;AACA;AAAuE;AAAA;AAmBhE,IAAMA,uBAAuB,GAAG,SAA1BA,uBAAuB,OAS0B;EAAA,4BAR5DC,WAAW;IAAXA,WAAW,iCAAG,mBAAmB;IAAA,sBACjCC,SAAS;IAATA,SAAS,+BAAG,qBAAqB;IAAA,6BACjCC,iBAAiB;IAAjBA,iBAAiB,sCAAG,UAAU;IAAA,yBAC9BC,YAAY;IAAZA,YAAY,kCAAG,CAAC,CAAC;IAAA,yBACjBC,YAAY;IAAZA,YAAY,kCAAG,EAAE;IACjBC,SAAS,QAATA,SAAS;IACTC,cAAc,QAAdA,cAAc;IACdC,OAAM,QAANA,MAAM;EAEN,IAAMC,kBAAkB;IACtBC,EAAE,EAAE;EAAK,GACLN,YAAY,CACjB;EAED,IAAMO,eAA6C,GAAG,SAAhDA,eAA6C,CAAIC,KAAK,EAA4B;IACtF;IACA;IACA,IAAMC,GAAG,GAAGC,KAAK,CAACC,MAAM,CAAC,IAAI,CAAC;IAE9B,IAAMC,OAAO,GAAG,IAAAC,+BAAgB,GAAE;IAClC,IAAMC,gBAAgB,GAAGJ,KAAK,CAACC,MAAM,CAAU,IAAI,CAAC;IAEpD,OAAO,IAAAI,gCAAe,EACpB;MACEjB,SAAS,EAATA,SAAS;MACTD,WAAW,EAAXA,WAAW;MACXI,YAAY,EAAE,oBAAOC,SAAS,CAAC,CAACc,MAAM,CAACf,YAAY,CAAC;MACpDO,KAAK,EAALA,KAAK;MACLS,KAAK,EAAE,CAAC,CAAC;MACTd,cAAc,EAAdA,cAAc;MACdC,MAAM,EAAE,gBAAAc,MAAM;QAAA,OAAId,OAAM,CAACc,MAAM,EAAEV,KAAK,CAAC;MAAA;MACvCW,SAAS,EAAE,mBAAAC,aAAa;QAAA,OAAKX,GAAG,CAACY,OAAO,GAAG;UAAED,aAAa,EAAbA;QAAc,CAAC;MAAA,CAAC;MAC7DN,gBAAgB,EAAhBA;IACF,CAAC,EACDF,OAAO,CACR;EACH,CAAC;EAEDL,eAAe,CAACe,oBAAoB,GAAGxB,SAAS;EAEhDS,eAAe,CAACgB,MAAM,GAAG,IAAAC,iCAAsB,EAAC;IAC9CC,SAAS,EAAEpB,kBAAkB,CAACC,EAAE;IAChCoB,UAAU,EAAE3B;EACd,CAAC,CAAC;EAEFQ,eAAe,CAACV,WAAW,GAAGA,WAAW;EAEzCU,eAAe,CAACL,SAAS,GAAGA,SAAS,CAAC,CAAC;;EAEvCK,eAAe,CAACP,YAAY,GAAGK,kBAAkB;EAEjD,OAAOE,eAAe;AACxB,CAAC;AAAC"}