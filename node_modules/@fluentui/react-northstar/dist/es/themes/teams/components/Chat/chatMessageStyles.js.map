{"version":3,"file":"chatMessageStyles.js","names":["defaultChatDensity","chatMessageSlotClassNames","pxToRem","getBorderFocusStyles","chatMessageStylesComfy","chatMessageStylesCompact","chatMessageStylesComfyRefresh","displayActionMenu","overlayZIndex","zIndex","overflow","opacity","width","chatMessageDensityStyles","comfy","compact","getChatMessageVariantStyles","props","density","layout","chatMessageStyles","root","componentStyleFunctionParam","p","v","variables","siteVariables","theme","borderRadius","display","outline","position","wordBreak","wordWrap","showActionMenu","hasActionMenu","actionMenu","defaultShowActionMenu","focused","backgroundColor","border","borderColor","reactionGroupBorderColor","boxShadow","actionMenuBoxShadow","author","compactBody","timestamp","badge","hasMention","hasMentionNubbinColor","isImportantColor","badgeShadow","color","badgeTextColor","height","padding","body","bubble","bubbleInset","reactionGroup"],"sources":["themes/teams/components/Chat/chatMessageStyles.ts"],"sourcesContent":["import { ComponentSlotStylesPrepared, ICSSInJSStyle } from '@fluentui/styles';\nimport { isNil } from 'lodash';\n\nimport { ChatDensity, defaultChatDensity } from '../../../../components/Chat/chatDensity';\nimport { chatMessageSlotClassNames, ChatMessageStylesProps } from '../../../../components/Chat/ChatMessage';\nimport { pxToRem } from '../../../../utils';\nimport { getBorderFocusStyles } from '../../getBorderFocusStyles';\nimport { chatMessageStylesComfy } from './chatMessageStylesComfy';\nimport { chatMessageStylesCompact } from './chatMessageStylesCompact';\nimport { chatMessageStylesComfyRefresh } from './chatMessageStylesComfyRefresh';\nimport { ChatMessageVariables } from './chatMessageVariables';\n\nconst displayActionMenu = (overlayZIndex: ICSSInJSStyle['zIndex']): ICSSInJSStyle => ({\n  // we need higher zIndex for the action menu in order to be displayed above the focus border of the chat message\n  zIndex: overlayZIndex,\n  overflow: 'visible',\n  // opacity should always be preferred over visibility in order to avoid accessibility bugs in\n  // JAWS behavior on Windows\n  opacity: 1,\n  width: 'auto',\n});\n\nconst chatMessageDensityStyles: Record<\n  ChatDensity,\n  ComponentSlotStylesPrepared<ChatMessageStylesProps, ChatMessageVariables>\n> = {\n  comfy: chatMessageStylesComfy,\n  compact: chatMessageStylesCompact,\n};\n\nconst getChatMessageVariantStyles = (props: ChatMessageStylesProps) => {\n  const density = props.density || defaultChatDensity;\n  if (props.layout === 'refresh' && density === 'comfy') {\n    return chatMessageStylesComfyRefresh;\n  }\n  return chatMessageDensityStyles[density];\n};\n\nexport const chatMessageStyles: ComponentSlotStylesPrepared<ChatMessageStylesProps, ChatMessageVariables> = {\n  root: (componentStyleFunctionParam): ICSSInJSStyle => {\n    const {\n      props: p,\n      variables: v,\n      theme: { siteVariables },\n    } = componentStyleFunctionParam;\n\n    if (p.layout === 'refresh' && p.density === 'comfy') {\n      return chatMessageStylesComfyRefresh.root(componentStyleFunctionParam);\n    }\n    return {\n      borderRadius: v.borderRadius,\n      display: 'inline-block',\n      outline: 0,\n      position: 'relative',\n      wordBreak: 'break-word',\n      wordWrap: 'break-word',\n\n      ...getBorderFocusStyles({ borderRadius: 'inherit', variables: siteVariables }),\n\n      // ActionMenu's appearance can be controlled by the value of showActionMenu variable - in this\n      // case this variable will serve the single source of truth on whether actions menu should be shown.\n      // Otherwise, if the variable is not provided, the default appearance logic will be used for actions menu.\n      ...(isNil(v.showActionMenu) &&\n        p.hasActionMenu && {\n          ':hover': {\n            [`> .${chatMessageSlotClassNames.actionMenu}`]: displayActionMenu(v.overlayZIndex),\n          },\n          ...(p.showActionMenu && {\n            [`> .${chatMessageSlotClassNames.actionMenu}`]: displayActionMenu(v.overlayZIndex),\n          }),\n        }),\n\n      ...getChatMessageVariantStyles(p).root?.(componentStyleFunctionParam),\n    };\n  },\n\n  actionMenu: (componentStyleFunctionParam): ICSSInJSStyle => {\n    const { props: p, variables: v } = componentStyleFunctionParam;\n    const defaultShowActionMenu = p.hasActionMenu && (p.focused || p.showActionMenu);\n    const showActionMenu = isNil(v.showActionMenu) ? defaultShowActionMenu : v.showActionMenu;\n\n    return {\n      backgroundColor: v.backgroundColor,\n      border: '1px solid',\n      borderColor: v.reactionGroupBorderColor,\n      borderRadius: v.borderRadius,\n      boxShadow: v.actionMenuBoxShadow,\n      '[data-popper-escaped]': { opacity: 0 },\n\n      zIndex: -1,\n      overflow: 'hidden',\n      opacity: 0,\n      width: 0,\n      ...(showActionMenu && displayActionMenu(v.overlayZIndex)),\n      ...getChatMessageVariantStyles(p).actionMenu?.(componentStyleFunctionParam),\n    };\n  },\n\n  author: (componentStyleFunctionParam): ICSSInJSStyle => {\n    const { props: p } = componentStyleFunctionParam;\n    return getChatMessageVariantStyles(p).author?.(componentStyleFunctionParam);\n  },\n\n  compactBody: (componentStyleFunctionParam): ICSSInJSStyle => {\n    const { props: p } = componentStyleFunctionParam;\n    return getChatMessageVariantStyles(p).compactBody?.(componentStyleFunctionParam);\n  },\n\n  timestamp: (componentStyleFunctionParam): ICSSInJSStyle => {\n    const { props: p } = componentStyleFunctionParam;\n    return {\n      display: 'inline-block',\n      ...getChatMessageVariantStyles(p).timestamp?.(componentStyleFunctionParam),\n    };\n  },\n\n  badge: (componentStyleFunctionParam): ICSSInJSStyle => {\n    const { props: p, variables: v } = componentStyleFunctionParam;\n    return {\n      backgroundColor: v.hasMention ? v.hasMentionNubbinColor : v.isImportantColor,\n      borderRadius: '50%',\n      boxShadow: v.badgeShadow,\n      color: v.badgeTextColor,\n      height: 'auto',\n      padding: pxToRem(4),\n      width: 'auto',\n      zIndex: v.zIndex,\n      '& > :first-child': { display: 'inline-flex' },\n      ...getChatMessageVariantStyles(p).badge?.(componentStyleFunctionParam),\n    };\n  },\n\n  body: (componentStyleFunctionParam): ICSSInJSStyle => {\n    const { props: p } = componentStyleFunctionParam;\n    return {\n      ...getChatMessageVariantStyles(p).body?.(componentStyleFunctionParam),\n    };\n  },\n\n  bubble: (componentStyleFunctionParam): ICSSInJSStyle => {\n    const { props: p } = componentStyleFunctionParam;\n    return {\n      ...getChatMessageVariantStyles(p).bubble?.(componentStyleFunctionParam),\n    };\n  },\n\n  bubbleInset: (componentStyleFunctionParam): ICSSInJSStyle => {\n    const { props: p } = componentStyleFunctionParam;\n    return {\n      ...getChatMessageVariantStyles(p).bubbleInset?.(componentStyleFunctionParam),\n    };\n  },\n\n  reactionGroup: (componentStyleFunctionParam): ICSSInJSStyle => {\n    const { props: p } = componentStyleFunctionParam;\n    return getChatMessageVariantStyles(p).reactionGroup?.(componentStyleFunctionParam);\n  },\n};\n"],"mappings":"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"}