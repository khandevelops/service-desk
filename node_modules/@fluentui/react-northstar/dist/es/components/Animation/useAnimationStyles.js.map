{"version":3,"file":"useAnimationStyles.js","names":["unstable_getStyles","getStyles","unstable_createAnimationStyles","createAnimationStyles","useFluentContext","animationCache","WeakMap","animationClassName","useAnimationStyles","displayName","props","theme","rtl","disableAnimations","renderer","performance","className","animationDuration","animationDelay","animation","name","keyframeParams","duration","delay","iterationCount","direction","fillMode","playState","timingFunction","cacheEnabled","enableStylesCaching","cachePerTheme","cacheKey","has","set","get","JSON","stringify","allDisplayNames","primaryDisplayName","componentProps","inlineStylesProps","styles","enableSanitizeCssPlugin","enableVariablesCaching","enableBooleanVariablesCaching","saveDebug","telemetry","undefined","classes","result","root"],"sources":["components/Animation/useAnimationStyles.ts"],"sourcesContent":["import {\n  ComponentAnimationProp,\n  unstable_getStyles as getStyles,\n  unstable_createAnimationStyles as createAnimationStyles,\n  useFluentContext,\n} from '@fluentui/react-bindings';\nimport { ThemePrepared } from '@fluentui/styles';\n\nimport * as _ from 'lodash';\nimport { AnimationProps } from './Animation';\n\ntype UseAnimationStylesResult = {\n  className: string;\n  animationDuration?: string;\n  animationDelay?: string;\n};\n\nconst animationCache = new WeakMap<ThemePrepared, Record<string, UseAnimationStylesResult>>();\nexport const animationClassName = 'ui-animation';\n\nexport const useAnimationStyles = (displayName: string, props: AnimationProps): UseAnimationStylesResult => {\n  const { theme, rtl, disableAnimations, renderer, performance } = useFluentContext();\n\n  if (disableAnimations) {\n    return {\n      className: animationClassName,\n      animationDuration: '0ms',\n      animationDelay: '0ms',\n    };\n  }\n\n  const animation: ComponentAnimationProp = {\n    name: props.name,\n    keyframeParams: props.keyframeParams,\n    duration: props.duration,\n    delay: props.delay,\n    iterationCount: props.iterationCount,\n    direction: props.direction,\n    fillMode: props.fillMode,\n    playState: props.playState,\n    timingFunction: props.timingFunction,\n  };\n\n  const cacheEnabled = performance.enableStylesCaching;\n\n  let cachePerTheme = {};\n  let cacheKey = '';\n\n  if (cacheEnabled) {\n    if (!animationCache.has(theme)) {\n      animationCache.set(theme, {});\n    }\n\n    cachePerTheme = animationCache.get(theme);\n    cacheKey = JSON.stringify(animation);\n\n    if (cachePerTheme[cacheKey]) {\n      return cachePerTheme[cacheKey];\n    }\n  }\n\n  const { classes, styles } = getStyles({\n    allDisplayNames: [displayName],\n    className: animationClassName,\n    primaryDisplayName: displayName,\n    componentProps: {},\n    inlineStylesProps: {\n      styles: createAnimationStyles(animation, theme),\n    },\n\n    disableAnimations,\n    renderer,\n    rtl,\n    performance: {\n      enableSanitizeCssPlugin: false,\n      enableStylesCaching: false,\n      enableVariablesCaching: false,\n      enableBooleanVariablesCaching: false,\n    },\n    saveDebug: _.noop,\n    theme,\n    telemetry: undefined,\n  });\n\n  const result: UseAnimationStylesResult = {\n    className: classes.root,\n    animationDuration: styles.root.animationDuration as string,\n    animationDelay: styles.root.animationDelay as string,\n  };\n\n  if (cacheEnabled) {\n    cachePerTheme[cacheKey] = result;\n    animationCache.set(theme, cachePerTheme);\n  }\n\n  return result;\n};\n"],"mappings":"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"}