{"version":3,"file":"ChatItem.js","names":["getElementType","useAccessibility","useFluentContext","useStyles","useTelemetry","useUnhandledProps","customPropTypes","PropTypes","React","childrenExist","commonPropTypes","createShorthandFactory","rtlTextContainer","Box","useChatContextSelectors","ChatItemContextProvider","chatItemClassName","chatItemSlotClassNames","message","gutter","ChatItem","forwardRef","inputProps","ref","context","displayName","telemetry","setStart","setEnd","chatProps","density","v","accessibility","behaviors","item","props","attached","children","className","contentPosition","design","styles","variables","unstable_layout","layout","getA11Props","debugName","rtl","mapPropsToStyles","mapPropsToInlineStyles","classes","resolvedStyles","renderContent","gutterElement","create","defaultProps","messageElement","ElementType","unhandledProps","handledProps","element","root","getAttributes","forElements","as","propTypes","createCommon","content","oneOfType","bool","oneOf","itemShorthand","Object","keys","Component","mappedProp"],"sources":["components/Chat/ChatItem.tsx"],"sourcesContent":["import { Accessibility } from '@fluentui/accessibility';\nimport {\n  ForwardRefWithAs,\n  getElementType,\n  useAccessibility,\n  useFluentContext,\n  useStyles,\n  useTelemetry,\n  useUnhandledProps,\n} from '@fluentui/react-bindings';\nimport * as customPropTypes from '@fluentui/react-proptypes';\nimport * as PropTypes from 'prop-types';\nimport * as React from 'react';\n\nimport { FluentComponentStaticProps, ShorthandValue } from '../../types';\nimport {\n  ChildrenComponentProps,\n  childrenExist,\n  commonPropTypes,\n  createShorthandFactory,\n  rtlTextContainer,\n  UIComponentProps,\n} from '../../utils';\nimport { Box, BoxProps } from '../Box/Box';\nimport { useChatContextSelectors } from './chatContext';\nimport { ChatDensity } from './chatDensity';\nimport { ChatItemContextProvider } from './chatItemContext';\nimport type { ChatMessageLayout } from './ChatMessage';\n\nexport interface ChatItemSlotClassNames {\n  message: string;\n  gutter: string;\n}\n\nexport const chatItemClassName = 'ui-chat__item';\nexport const chatItemSlotClassNames: ChatItemSlotClassNames = {\n  message: `${chatItemClassName}__message`,\n  gutter: `${chatItemClassName}__gutter`,\n};\n\nexport interface ChatItemProps extends UIComponentProps, ChildrenComponentProps {\n  /** Accessibility behavior if overridden by the user. */\n  accessibility?: Accessibility<never>;\n\n  /** Controls item's relation to other chat items. */\n  attached?: boolean | 'top' | 'bottom';\n\n  /** Indicates whether the content is positioned at the start or the end. */\n  contentPosition?: 'start' | 'end';\n\n  /** Chat density. Is automatically set by the Chat. */\n  density?: ChatDensity;\n\n  /** Chat items can have a gutter. */\n  gutter?: ShorthandValue<BoxProps>;\n\n  /** Chat items can have a message. */\n  message?: ShorthandValue<BoxProps>;\n\n  /** Chat items can render with different layouts. */\n  unstable_layout?: ChatMessageLayout;\n}\n\nexport type ChatItemStylesProps = Pick<ChatItemProps, 'attached' | 'contentPosition' | 'density'> & {\n  layout: ChatMessageLayout;\n};\n\n/**\n * A ChatItem is container for single entity in Chat (e.g. message, notification, etc).\n */\nexport const ChatItem = (React.forwardRef<HTMLLIElement, ChatItemProps>((inputProps, ref) => {\n  const context = useFluentContext();\n  const { setStart, setEnd } = useTelemetry(ChatItem.displayName, context.telemetry);\n  setStart();\n\n  const chatProps = useChatContextSelectors({\n    density: v => v.density,\n    accessibility: v => v.behaviors.item,\n  });\n  const props = {\n    ...chatProps,\n    ...inputProps,\n  };\n\n  const {\n    accessibility,\n    attached,\n    children,\n    className,\n    contentPosition,\n    density,\n    design,\n    gutter,\n    message,\n    styles,\n    variables,\n    unstable_layout: layout = 'default',\n  } = props;\n\n  const getA11Props = useAccessibility(accessibility, {\n    debugName: ChatItem.displayName,\n    rtl: context.rtl,\n  });\n  const { classes, styles: resolvedStyles } = useStyles<ChatItemStylesProps>(ChatItem.displayName, {\n    className: chatItemClassName,\n    mapPropsToStyles: () => ({\n      layout,\n      attached,\n      contentPosition,\n      density,\n    }),\n    mapPropsToInlineStyles: () => ({\n      className,\n      design,\n      styles,\n      variables,\n    }),\n    rtl: context.rtl,\n  });\n\n  const renderContent = () => {\n    const gutterElement = Box.create(gutter, {\n      defaultProps: () =>\n        getA11Props('gutter', {\n          className: chatItemSlotClassNames.gutter,\n          styles: resolvedStyles.gutter,\n        }),\n    });\n    const messageElement = Box.create(message, {\n      defaultProps: () =>\n        getA11Props('message', {\n          className: chatItemSlotClassNames.message,\n          styles: resolvedStyles.message,\n        }),\n    });\n\n    return (\n      <ChatItemContextProvider value={{ attached }}>\n        {(contentPosition === 'start' || density === 'compact') && gutterElement}\n        {messageElement}\n        {contentPosition === 'end' && density === 'comfy' && gutterElement}\n      </ChatItemContextProvider>\n    );\n  };\n\n  const ElementType = getElementType(props);\n  const unhandledProps = useUnhandledProps(ChatItem.handledProps, props);\n\n  const element = (\n    <ElementType\n      {...getA11Props('root', {\n        className: classes.root,\n        ref,\n        ...rtlTextContainer.getAttributes({ forElements: [children] }),\n        ...unhandledProps,\n      })}\n    >\n      {childrenExist(children) ? children : renderContent()}\n    </ElementType>\n  );\n  setEnd();\n\n  return element;\n}) as unknown) as ForwardRefWithAs<'li', HTMLLIElement, ChatItemProps> & FluentComponentStaticProps<ChatItemProps>;\n\nChatItem.displayName = 'ChatItem';\n\nChatItem.defaultProps = {\n  as: 'li',\n  contentPosition: 'start',\n  attached: false,\n};\nChatItem.propTypes = {\n  ...commonPropTypes.createCommon({ content: false }),\n  attached: PropTypes.oneOfType([PropTypes.bool, PropTypes.oneOf<'top' | 'bottom'>(['top', 'bottom'])]),\n  contentPosition: PropTypes.oneOf(['start', 'end']),\n  density: PropTypes.oneOf<ChatDensity>(['comfy', 'compact']),\n  gutter: customPropTypes.itemShorthand,\n  message: customPropTypes.itemShorthand,\n  unstable_layout: PropTypes.oneOf(['default', 'refresh']),\n};\nChatItem.handledProps = Object.keys(ChatItem.propTypes) as any;\n\nChatItem.create = createShorthandFactory({ Component: ChatItem, mappedProp: 'message' });\n"],"mappings":"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"}