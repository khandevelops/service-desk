{"version":3,"file":"usePortalBox.js","names":["useIsomorphicLayoutEffect","React","isBrowser","usePortalBox","options","className","rtl","target","element","useMemo","newElement","createElement","body","appendChild","classes","split","filter","Boolean","classList","add","setAttribute","removeAttribute","remove","useEffect","removeChild"],"sources":["components/Portal/usePortalBox.ts"],"sourcesContent":["import { useIsomorphicLayoutEffect } from '@fluentui/react-bindings';\nimport * as React from 'react';\n\nimport { isBrowser } from '../../utils/isBrowser';\n\ntype UsePortalBoxOptions = {\n  className: string;\n  rtl: boolean;\n  target: Document | undefined;\n};\n\nexport const usePortalBox = (options: UsePortalBoxOptions): HTMLDivElement | null => {\n  const { className, rtl, target } = options;\n\n  const element: HTMLDivElement | null = React.useMemo(() => {\n    const newElement = isBrowser() && target ? target.createElement('div') : null;\n\n    // Element should be attached to DOM during render to make elements that will be rendered\n    // inside accessible in effects of child components\n    if (newElement) {\n      target.body.appendChild(newElement);\n    }\n\n    return newElement;\n  }, [target]);\n\n  useIsomorphicLayoutEffect(() => {\n    const classes = className.split(' ').filter(Boolean);\n\n    if (element) {\n      element.classList.add(...classes);\n\n      if (rtl) {\n        element.setAttribute('dir', 'rtl');\n      } else {\n        element.removeAttribute('dir');\n      }\n    }\n\n    return () => {\n      if (element) {\n        element.classList.remove(...classes);\n        element.removeAttribute('dir');\n      }\n    };\n  }, [className, element, rtl]);\n\n  // This effect should always last as it removes element from HTML tree\n  React.useEffect(() => {\n    return () => {\n      if (element) {\n        target.body.removeChild(element);\n      }\n    };\n  }, [element, target]);\n\n  return element;\n};\n"],"mappings":"AAAA,SAASA,yBAAyB,QAAQ,0BAA0B;AACpE,OAAO,KAAKC,KAAK,MAAM,OAAO;AAE9B,SAASC,SAAS,QAAQ,uBAAuB;AAQjD,OAAO,IAAMC,YAAY,GAAG,SAAfA,YAAY,CAAIC,OAA4B,EAA4B;EACnF,IAAQC,SAAS,GAAkBD,OAAO,CAAlCC,SAAS;IAAEC,GAAG,GAAaF,OAAO,CAAvBE,GAAG;IAAEC,MAAM,GAAKH,OAAO,CAAlBG,MAAM;EAE9B,IAAMC,OAA8B,GAAGP,KAAK,CAACQ,OAAO,CAAC,YAAM;IACzD,IAAMC,UAAU,GAAGR,SAAS,EAAE,IAAIK,MAAM,GAAGA,MAAM,CAACI,aAAa,CAAC,KAAK,CAAC,GAAG,IAAI;;IAE7E;IACA;IACA,IAAID,UAAU,EAAE;MACdH,MAAM,CAACK,IAAI,CAACC,WAAW,CAACH,UAAU,CAAC;IACrC;IAEA,OAAOA,UAAU;EACnB,CAAC,EAAE,CAACH,MAAM,CAAC,CAAC;EAEZP,yBAAyB,CAAC,YAAM;IAC9B,IAAMc,OAAO,GAAGT,SAAS,CAACU,KAAK,CAAC,GAAG,CAAC,CAACC,MAAM,CAACC,OAAO,CAAC;IAEpD,IAAIT,OAAO,EAAE;MAAA;MACX,sBAAAA,OAAO,CAACU,SAAS,EAACC,GAAG,2BAAIL,OAAO,CAAC;MAEjC,IAAIR,GAAG,EAAE;QACPE,OAAO,CAACY,YAAY,CAAC,KAAK,EAAE,KAAK,CAAC;MACpC,CAAC,MAAM;QACLZ,OAAO,CAACa,eAAe,CAAC,KAAK,CAAC;MAChC;IACF;IAEA,OAAO,YAAM;MACX,IAAIb,OAAO,EAAE;QAAA;QACX,uBAAAA,OAAO,CAACU,SAAS,EAACI,MAAM,4BAAIR,OAAO,CAAC;QACpCN,OAAO,CAACa,eAAe,CAAC,KAAK,CAAC;MAChC;IACF,CAAC;EACH,CAAC,EAAE,CAAChB,SAAS,EAAEG,OAAO,EAAEF,GAAG,CAAC,CAAC;;EAE7B;EACAL,KAAK,CAACsB,SAAS,CAAC,YAAM;IACpB,OAAO,YAAM;MACX,IAAIf,OAAO,EAAE;QACXD,MAAM,CAACK,IAAI,CAACY,WAAW,CAAChB,OAAO,CAAC;MAClC;IACF,CAAC;EACH,CAAC,EAAE,CAACA,OAAO,EAAED,MAAM,CAAC,CAAC;EAErB,OAAOC,OAAO;AAChB,CAAC"}