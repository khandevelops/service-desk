{"version":3,"file":"FormField.js","names":["formFieldBehavior","customPropTypes","PropTypes","React","childrenExist","createShorthandFactory","commonPropTypes","getOrGenerateIdFromShorthand","Text","Input","Box","getElementType","useUnhandledProps","useFluentContext","useTelemetry","useStyles","useAccessibility","formFieldClassName","formFieldMessageClassName","FormField","forwardRef","props","ref","context","displayName","telemetry","setStart","setEnd","children","control","id","label","message","name","required","type","className","design","styles","variables","inline","errorMessage","ElementType","unhandledProps","handledProps","messageId","useRef","current","labelId","getA11yProps","accessibility","debugName","mapPropsToBehavior","hasErrorMessage","rtl","mapPropsToStyles","mapPropsToInlineStyles","classes","resolvedStyles","labelElement","create","defaultProps","as","htmlFor","messageElement","controlElement","error","shouldControlAppearFirst","content","element","root","propTypes","createCommon","shorthandAllowingChildren","string","bool","itemShorthand","Object","keys","Component","mappedProp"],"sources":["components/Form/FormField.tsx"],"sourcesContent":["import { Accessibility, FormFieldBehaviorProps, formFieldBehavior } from '@fluentui/accessibility';\nimport * as customPropTypes from '@fluentui/react-proptypes';\nimport * as PropTypes from 'prop-types';\nimport * as React from 'react';\nimport {\n  childrenExist,\n  createShorthandFactory,\n  UIComponentProps,\n  ChildrenComponentProps,\n  commonPropTypes,\n  getOrGenerateIdFromShorthand,\n} from '../../utils';\nimport { ShorthandValue, FluentComponentStaticProps } from '../../types';\nimport { Text, TextProps } from '../Text/Text';\nimport { Input } from '../Input/Input';\nimport { Box, BoxProps } from '../Box/Box';\nimport {\n  getElementType,\n  useUnhandledProps,\n  useFluentContext,\n  useTelemetry,\n  useStyles,\n  useAccessibility,\n  ForwardRefWithAs,\n} from '@fluentui/react-bindings';\n\nexport interface FormFieldProps extends UIComponentProps, ChildrenComponentProps {\n  /**\n   * Accessibility behavior if overridden by the user.\n   */\n  accessibility?: Accessibility<FormFieldBehaviorProps>;\n\n  /**\n   * @deprecated\n   * A control for the form field.\n   */\n  control?: ShorthandValue<BoxProps>;\n\n  /** The HTML input id. This will be set on the control element and will be use for linking it with the label for correct accessibility. */\n  id?: string;\n\n  /** A field can have its label next to instead of above it. */\n  inline?: boolean;\n\n  /** A label for the form field. */\n  label?: ShorthandValue<TextProps>;\n\n  /** Text message that will be displayed below the control (can be used for error, warning, success messages). */\n  message?: ShorthandValue<TextProps>;\n\n  /** The HTML input name. */\n  name?: string;\n\n  /** A field can show that input is mandatory. */\n  required?: boolean;\n\n  /** The HTML input type. */\n  type?: string;\n\n  /** Message to be shown when input has error */\n  errorMessage?: ShorthandValue<TextProps>;\n}\n\nexport const formFieldClassName = 'ui-form__field';\nexport const formFieldMessageClassName = 'ui-form__field__message';\n\nexport type FormFieldStylesProps = Required<Pick<FormFieldProps, 'type' | 'inline' | 'required'>> & {\n  hasErrorMessage: boolean;\n};\n\n/**\n * A FormField represents a Form element containing a label and an input.\n */\nexport const FormField = (React.forwardRef<HTMLDivElement, FormFieldProps>((props, ref) => {\n  const context = useFluentContext();\n  const { setStart, setEnd } = useTelemetry(FormField.displayName, context.telemetry);\n  setStart();\n\n  const {\n    children,\n    control,\n    id,\n    label,\n    message,\n    name,\n    required,\n    type,\n    className,\n    design,\n    styles,\n    variables,\n    inline,\n    errorMessage,\n  } = props;\n\n  const ElementType = getElementType(props);\n  const unhandledProps = useUnhandledProps(FormField.handledProps, props);\n  const messageId = React.useRef<string>();\n  messageId.current = getOrGenerateIdFromShorthand('error-message-', message || errorMessage, messageId.current);\n  const labelId = React.useRef<string>();\n  labelId.current = getOrGenerateIdFromShorthand('form-label-', id, labelId.current);\n\n  const getA11yProps = useAccessibility<FormFieldBehaviorProps>(props.accessibility, {\n    debugName: FormField.displayName,\n    mapPropsToBehavior: () => ({\n      hasErrorMessage: !!errorMessage,\n      messageId: messageId.current,\n      labelId: labelId.current,\n    }),\n    rtl: context.rtl,\n  });\n\n  const { classes, styles: resolvedStyles } = useStyles<FormFieldStylesProps>(FormField.displayName, {\n    className: formFieldClassName,\n    mapPropsToStyles: () => ({\n      type,\n      inline,\n      required,\n      hasErrorMessage: !!errorMessage,\n    }),\n    mapPropsToInlineStyles: () => ({\n      className,\n      design,\n      styles,\n      variables,\n    }),\n    rtl: context.rtl,\n  });\n\n  const labelElement = Text.create(label, {\n    defaultProps: () =>\n      getA11yProps('label', {\n        as: 'label',\n        htmlFor: id,\n        id: labelId.current,\n        styles: resolvedStyles.label,\n      }),\n  });\n\n  const messageElement = Text.create(errorMessage || message, {\n    defaultProps: () =>\n      getA11yProps('message', {\n        className: formFieldMessageClassName,\n        id: messageId.current,\n        styles: resolvedStyles.message,\n      }),\n  });\n\n  const controlElement = Box.create(control || {}, {\n    defaultProps: () =>\n      getA11yProps('control', {\n        required,\n        name,\n        id,\n        type,\n        error: !!errorMessage || null,\n        styles: resolvedStyles.control,\n      }),\n  });\n\n  const shouldControlAppearFirst = () => {\n    return type && (type === 'checkbox' || type === 'radio');\n  };\n\n  const content = (\n    <>\n      {shouldControlAppearFirst() && controlElement}\n      {labelElement}\n      {!shouldControlAppearFirst() && controlElement}\n      {messageElement}\n    </>\n  );\n\n  const element = (\n    <ElementType\n      {...getA11yProps('root', {\n        className: classes.root,\n        ref,\n        ...unhandledProps,\n      })}\n    >\n      {childrenExist(children) ? children : content}\n    </ElementType>\n  );\n  setEnd();\n  return element;\n}) as unknown) as ForwardRefWithAs<'div', HTMLDivElement, FormFieldProps> & FluentComponentStaticProps<FormFieldProps>;\n\nFormField.displayName = 'FormField';\n\nFormField.propTypes = {\n  ...commonPropTypes.createCommon({\n    content: false,\n  }),\n  control: customPropTypes.shorthandAllowingChildren,\n  id: PropTypes.string,\n  inline: PropTypes.bool,\n  label: customPropTypes.itemShorthand,\n  message: customPropTypes.itemShorthand,\n  name: PropTypes.string,\n  required: PropTypes.bool,\n  type: PropTypes.string,\n  errorMessage: customPropTypes.shorthandAllowingChildren,\n};\n\nFormField.handledProps = Object.keys(FormField.propTypes) as any;\n\nFormField.defaultProps = {\n  accessibility: formFieldBehavior,\n  control: { as: Input },\n};\n\nFormField.create = createShorthandFactory({ Component: FormField, mappedProp: 'label' });\n"],"mappings":"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"}