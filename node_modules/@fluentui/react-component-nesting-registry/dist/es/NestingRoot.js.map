{"version":3,"file":"NestingRoot.js","names":["React","RefStack","NestingContext","NestingRoot","_React$Component","_inheritsLoose","_this","_len","arguments","length","args","Array","_key","call","apply","concat","registry","parentRef","createRef","getRefs","getContextRefs","_proto","prototype","componentDidMount","register","componentWillUnmount","unregister","render","createElement","Provider","value","props","children","Component"],"sources":["NestingRoot.tsx"],"sourcesContent":["import * as React from 'react';\n\nimport { RefStack } from './utils/RefStack';\nimport { NestingContext } from './NestingContext';\nimport { NestingProps, NodeRef } from './types';\n\nexport class NestingRoot<T extends Node> extends React.Component<NestingProps> {\n  registry = new RefStack();\n  parentRef = React.createRef<T>();\n\n  componentDidMount() {\n    this.registry.register(this.parentRef as any);\n  }\n\n  componentWillUnmount() {\n    this.registry.unregister(this.parentRef as any);\n  }\n\n  getRefs = (): NodeRef[] => this.registry.getContextRefs(this.parentRef as any);\n\n  render() {\n    return (\n      <NestingContext.Provider value={this.registry}>\n        {this.props.children(this.getRefs, this.parentRef as any)}\n      </NestingContext.Provider>\n    );\n  }\n}\n"],"mappings":";AAAA,OAAO,KAAKA,KAAK,MAAM,OAAO;AAE9B,SAASC,QAAQ,QAAQ,kBAAkB;AAC3C,SAASC,cAAc,QAAQ,kBAAkB;AAGjD,WAAaC,WAAW,0BAAAC,gBAAA;EAAAC,cAAA,CAAAF,WAAA,EAAAC,gBAAA;EAAA,SAAAD,YAAA;IAAA,IAAAG,KAAA;IAAA,SAAAC,IAAA,GAAAC,SAAA,CAAAC,MAAA,EAAAC,IAAA,OAAAC,KAAA,CAAAJ,IAAA,GAAAK,IAAA,MAAAA,IAAA,GAAAL,IAAA,EAAAK,IAAA;MAAAF,IAAA,CAAAE,IAAA,IAAAJ,SAAA,CAAAI,IAAA;IAAA;IAAAN,KAAA,GAAAF,gBAAA,CAAAS,IAAA,CAAAC,KAAA,CAAAV,gBAAA,SAAAW,MAAA,CAAAL,IAAA;IAAAJ,KAAA,CACtBU,QAAQ,GAAG,IAAIf,QAAQ,CAAC,CAAC;IAAAK,KAAA,CACzBW,SAAS,gBAAGjB,KAAK,CAACkB,SAAS,CAAI,CAAC;IAAAZ,KAAA,CAUhCa,OAAO,GAAG;MAAA,OAAiBb,KAAA,CAAKU,QAAQ,CAACI,cAAc,CAACd,KAAA,CAAKW,SAAgB,CAAC;IAAA;IAAA,OAAAX,KAAA;EAAA;EAAA,IAAAe,MAAA,GAAAlB,WAAA,CAAAmB,SAAA;EAAAD,MAAA,CAR9EE,iBAAiB,GAAjB,SAAAA,kBAAA,EAAoB;IAClB,IAAI,CAACP,QAAQ,CAACQ,QAAQ,CAAC,IAAI,CAACP,SAAgB,CAAC;EAC/C,CAAC;EAAAI,MAAA,CAEDI,oBAAoB,GAApB,SAAAA,qBAAA,EAAuB;IACrB,IAAI,CAACT,QAAQ,CAACU,UAAU,CAAC,IAAI,CAACT,SAAgB,CAAC;EACjD,CAAC;EAAAI,MAAA,CAIDM,MAAM,GAAN,SAAAA,OAAA,EAAS;IACP,oBACE3B,KAAA,CAAA4B,aAAA,CAAC1B,cAAc,CAAC2B,QAAQ;MAACC,KAAK,EAAE,IAAI,CAACd;IAAS,GAC3C,IAAI,CAACe,KAAK,CAACC,QAAQ,CAAC,IAAI,CAACb,OAAO,EAAE,IAAI,CAACF,SAAgB,CACjC,CAAC;EAE9B,CAAC;EAAA,OAAAd,WAAA;AAAA,EApB8CH,KAAK,CAACiC,SAAS"}