{"version":3,"file":"mergeComposeOptions.js","names":["_consts","require","_computeDisplayNames","mergeComposeOptions","input","inputOptions","parentOptions","defaultComposeOptions","mapPropsToSlotPropsChain","slotProps","concat","resolveSlotProps","props","reduce","acc","definition","nextProps","Object","assign","slots","keys","mergedSlotProps","forEach","slot","inputClasses","Array","isArray","classes","state","ref","options","className","displayName","displayNames","computeDisplayNames","mapPropsToStylesPropsChain","mapPropsToStylesProps","render","handledProps","overrideStyles","shorthandConfig"],"sources":["compose/mergeComposeOptions.ts"],"sourcesContent":["import { defaultComposeOptions, ComposeOptions, ComposePreparedOptions, Input } from './consts';\nimport { computeDisplayNames } from './computeDisplayNames';\n\nexport function mergeComposeOptions(\n  input: Input,\n  inputOptions: ComposeOptions,\n  parentOptions: Required<ComposePreparedOptions> = defaultComposeOptions,\n): Required<ComposePreparedOptions> {\n  const mapPropsToSlotPropsChain = inputOptions.slotProps\n    ? [...parentOptions.slotProps, inputOptions.slotProps]\n    : parentOptions.slotProps;\n\n  const resolveSlotProps = <P = {}>(props: P) =>\n    mapPropsToSlotPropsChain.reduce<Record<string, object>>((acc, definition) => {\n      const nextProps = { ...definition(props) };\n      const slots: string[] = [...Object.keys(acc), ...Object.keys(nextProps)];\n      const mergedSlotProps: Record<string, object> = {};\n\n      slots.forEach(slot => {\n        if (!mergedSlotProps[slot]) {\n          mergedSlotProps[slot] = {\n            ...acc[slot],\n            ...nextProps[slot],\n          };\n        }\n      });\n\n      return mergedSlotProps;\n    }, {});\n\n  const inputClasses = Array.isArray(inputOptions.classes) ? inputOptions.classes : [inputOptions.classes];\n\n  const state: ComposePreparedOptions['state'] = (props, ref, options) => {\n    if (inputOptions.state) {\n      return inputOptions.state(parentOptions.state(props, ref, options), ref, options);\n    }\n\n    return parentOptions.state(props, ref, options);\n  };\n\n  return {\n    className: inputOptions.className || parentOptions.className,\n    classes: [...parentOptions.classes, ...inputClasses],\n\n    displayName: inputOptions.displayName || parentOptions.displayName,\n    displayNames: computeDisplayNames(inputOptions, parentOptions),\n\n    mapPropsToStylesPropsChain: inputOptions.mapPropsToStylesProps\n      ? [...parentOptions.mapPropsToStylesPropsChain, inputOptions.mapPropsToStylesProps]\n      : parentOptions.mapPropsToStylesPropsChain,\n\n    render: typeof input === 'function' ? input : parentOptions.render,\n\n    handledProps: [...parentOptions.handledProps, ...((inputOptions.handledProps as never[]) || ([] as never[]))],\n\n    overrideStyles: inputOptions.overrideStyles || false,\n\n    slots: {\n      ...parentOptions.slots,\n      ...inputOptions.slots,\n    },\n\n    slotProps: mapPropsToSlotPropsChain,\n\n    state,\n\n    resolveSlotProps,\n\n    shorthandConfig: {\n      ...parentOptions.shorthandConfig,\n      ...inputOptions.shorthandConfig,\n    },\n  };\n}\n"],"mappings":"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"}