{"version":3,"file":"findScrollableParent.js","names":["_getDocument","require","_getWindow","DATA_IS_SCROLLABLE_ATTRIBUTE","exports","findScrollableParent","startingElement","el","doc","getDocument","body","getAttribute","parentElement","computedStyles","getComputedStyle","overflowY","getPropertyValue","getWindow"],"sources":["utils/findScrollableParent.ts"],"sourcesContent":["import { getDocument } from './getDocument';\nimport { getWindow } from './getWindow';\n\n/**\n * Placing this attribute on scrollable divs optimizes detection to know\n * if the div is scrollable or not (given we can avoid expensive operations\n * like getComputedStyle.)\n *\n * @public\n */\nexport const DATA_IS_SCROLLABLE_ATTRIBUTE = 'data-is-scrollable';\n\n/**\n * Traverses up the DOM for the element with the data-is-scrollable=true attribute, or returns\n * document.body.\n *\n * @public\n */\nexport function findScrollableParent(startingElement: HTMLElement | null): HTMLElement | Window | undefined | null {\n  let el: HTMLElement | Window | undefined | null = startingElement;\n  const doc = getDocument(startingElement)!;\n\n  // First do a quick scan for the scrollable attribute.\n  while (el && el !== doc.body) {\n    if (el.getAttribute(DATA_IS_SCROLLABLE_ATTRIBUTE) === 'true') {\n      return el;\n    }\n    el = el.parentElement;\n  }\n\n  // If we haven't found it, the use the slower method: compute styles to evaluate if overflow is set.\n  el = startingElement;\n\n  while (el && el !== doc.body) {\n    if (el.getAttribute(DATA_IS_SCROLLABLE_ATTRIBUTE) !== 'false') {\n      const computedStyles = getComputedStyle(el);\n      const overflowY = computedStyles ? computedStyles.getPropertyValue('overflow-y') : '';\n\n      if (overflowY && (overflowY === 'scroll' || overflowY === 'auto')) {\n        return el;\n      }\n    }\n\n    el = el.parentElement;\n  }\n\n  // Fall back to window scroll.\n  if (!el || el === doc.body) {\n    el = getWindow(startingElement);\n  }\n\n  return el;\n}\n"],"mappings":";;;;;AAAA,IAAAA,YAAA,GAAAC,OAAA;AACA,IAAAC,UAAA,GAAAD,OAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACO,IAAME,4BAA4B,GAAG,oBAAoB;;AAEhE;AACA;AACA;AACA;AACA;AACA;AALAC,OAAA,CAAAD,4BAAA,GAAAA,4BAAA;AAMO,SAASE,oBAAoBA,CAACC,eAAmC,EAA2C;EACjH,IAAIC,EAA2C,GAAGD,eAAe;EACjE,IAAME,GAAG,GAAG,IAAAC,wBAAW,EAACH,eAAe,CAAE;;EAEzC;EACA,OAAOC,EAAE,IAAIA,EAAE,KAAKC,GAAG,CAACE,IAAI,EAAE;IAC5B,IAAIH,EAAE,CAACI,YAAY,CAACR,4BAA4B,CAAC,KAAK,MAAM,EAAE;MAC5D,OAAOI,EAAE;IACX;IACAA,EAAE,GAAGA,EAAE,CAACK,aAAa;EACvB;;EAEA;EACAL,EAAE,GAAGD,eAAe;EAEpB,OAAOC,EAAE,IAAIA,EAAE,KAAKC,GAAG,CAACE,IAAI,EAAE;IAC5B,IAAIH,EAAE,CAACI,YAAY,CAACR,4BAA4B,CAAC,KAAK,OAAO,EAAE;MAC7D,IAAMU,cAAc,GAAGC,gBAAgB,CAACP,EAAE,CAAC;MAC3C,IAAMQ,SAAS,GAAGF,cAAc,GAAGA,cAAc,CAACG,gBAAgB,CAAC,YAAY,CAAC,GAAG,EAAE;MAErF,IAAID,SAAS,KAAKA,SAAS,KAAK,QAAQ,IAAIA,SAAS,KAAK,MAAM,CAAC,EAAE;QACjE,OAAOR,EAAE;MACX;IACF;IAEAA,EAAE,GAAGA,EAAE,CAACK,aAAa;EACvB;;EAEA;EACA,IAAI,CAACL,EAAE,IAAIA,EAAE,KAAKC,GAAG,CAACE,IAAI,EAAE;IAC1BH,EAAE,GAAG,IAAAU,oBAAS,EAACX,eAAe,CAAC;EACjC;EAEA,OAAOC,EAAE;AACX"}