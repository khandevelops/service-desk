{"version":3,"file":"getStyles.js","names":["_styles","require","_resolveVariables","_resolveStyles2","getStyles","options","primaryDisplayName","telemetry","telemetryPartStart","enabled","performance","now","resolvedVariables","resolveVariables","allDisplayNames","theme","inlineStylesProps","variables","enableVariablesCaching","msResolveVariablesTotal","_resolveStyles","resolveStyles","classes","resolvedStyles","resolvedStylesDebug","process","env","NODE_ENV","isDebugEnabled","saveDebug","componentName","join","componentVariables","_filter2","default","_debug","_isEmpty2","resolved","componentStyles","siteVariables","siteVars","keys","Object","length","pop","styles","exports"],"sources":["styles/getStyles.ts"],"sourcesContent":["import { ComponentSlotStylesResolved, ComponentVariablesObject, isDebugEnabled } from '@fluentui/styles';\nimport * as _ from 'lodash';\n\nimport { ProviderContextPrepared } from '../context';\nimport { ComponentSlotClasses, ResolveStylesOptions } from '../styles/types';\nimport { resolveVariables } from './resolveVariables';\nimport { resolveStyles } from './resolveStyles';\n\nexport type GetStylesResult = {\n  classes: ComponentSlotClasses;\n  variables: ComponentVariablesObject;\n  styles: ComponentSlotStylesResolved;\n  theme: ProviderContextPrepared['theme'];\n};\n\nexport const getStyles = (options: ResolveStylesOptions): GetStylesResult => {\n  const { primaryDisplayName, telemetry } = options;\n\n  //\n  // To compute styles we are going through three stages:\n  // - resolve variables (siteVariables => componentVariables + props.variables)\n  // - resolve styles (with resolvedVariables & props.styles & props.design)\n  // - compute classes (with resolvedStyles)\n  // - conditionally add sources for evaluating debug information to component\n\n  const telemetryPartStart = telemetry?.enabled ? performance.now() : 0;\n  const resolvedVariables = resolveVariables(\n    options.allDisplayNames,\n    options.theme,\n    options.inlineStylesProps.variables,\n    options.performance.enableVariablesCaching,\n  );\n\n  if (telemetry?.enabled && telemetry.performance[primaryDisplayName]) {\n    telemetry.performance[primaryDisplayName].msResolveVariablesTotal += performance.now() - telemetryPartStart;\n  }\n\n  const { classes, resolvedStyles, resolvedStylesDebug } = resolveStyles(options, resolvedVariables);\n\n  // conditionally add sources for evaluating debug information to component\n  if (process.env.NODE_ENV !== 'production' && isDebugEnabled) {\n    options.saveDebug({\n      componentName: options.allDisplayNames.join(':'),\n      componentVariables: _.filter(resolvedVariables._debug, variables => !_.isEmpty(variables.resolved)),\n      componentStyles: resolvedStylesDebug,\n      siteVariables: _.filter(options.theme.siteVariables._debug, siteVars => {\n        if (_.isEmpty(siteVars) || _.isEmpty(siteVars.resolved)) {\n          return false;\n        }\n\n        const keys = Object.keys(siteVars.resolved);\n        if (keys.length === 1 && keys.pop() === 'fontSizes' && _.isEmpty(siteVars.resolved['fontSizes'])) {\n          return false;\n        }\n\n        return true;\n      }),\n    });\n  }\n\n  return {\n    classes,\n    variables: resolvedVariables,\n    styles: resolvedStyles,\n    theme: options.theme,\n  };\n};\n"],"mappings":";;;;;;;AAAA,IAAAA,OAAA,GAAAC,OAAA;AAKA,IAAAC,iBAAA,GAAAD,OAAA;AACA,IAAAE,eAAA,GAAAF,OAAA;AASO,IAAMG,SAAS,GAAG,SAAZA,SAASA,CAAIC,OAA6B,EAAsB;EAC3E,IAAQC,kBAAkB,GAAgBD,OAAO,CAAzCC,kBAAkB;IAAEC,SAAS,GAAKF,OAAO,CAArBE,SAAS;;EAErC;EACA;EACA;EACA;EACA;EACA;;EAEA,IAAMC,kBAAkB,GAAGD,SAAS,YAATA,SAAS,CAAEE,OAAO,GAAGC,WAAW,CAACC,GAAG,CAAC,CAAC,GAAG,CAAC;EACrE,IAAMC,iBAAiB,GAAG,IAAAC,kCAAgB,EACxCR,OAAO,CAACS,eAAe,EACvBT,OAAO,CAACU,KAAK,EACbV,OAAO,CAACW,iBAAiB,CAACC,SAAS,EACnCZ,OAAO,CAACK,WAAW,CAACQ,sBACtB,CAAC;EAED,IAAIX,SAAS,YAATA,SAAS,CAAEE,OAAO,IAAIF,SAAS,CAACG,WAAW,CAACJ,kBAAkB,CAAC,EAAE;IACnEC,SAAS,CAACG,WAAW,CAACJ,kBAAkB,CAAC,CAACa,uBAAuB,IAAIT,WAAW,CAACC,GAAG,CAAC,CAAC,GAAGH,kBAAkB;EAC7G;EAEA,IAAAY,cAAA,GAAyD,IAAAC,6BAAa,EAAChB,OAAO,EAAEO,iBAAiB,CAAC;IAA1FU,OAAO,GAAAF,cAAA,CAAPE,OAAO;IAAEC,cAAc,GAAAH,cAAA,CAAdG,cAAc;IAAEC,mBAAmB,GAAAJ,cAAA,CAAnBI,mBAAmB;;EAEpD;EACA,IAAIC,OAAO,CAACC,GAAG,CAACC,QAAQ,KAAK,YAAY,IAAIC,sBAAc,EAAE;IAC3DvB,OAAO,CAACwB,SAAS,CAAC;MAChBC,aAAa,EAAEzB,OAAO,CAACS,eAAe,CAACiB,IAAI,CAAC,GAAG,CAAC;MAChDC,kBAAkB,EAAE,IAAAC,QAAA,CAAAC,OAAA,EAAStB,iBAAiB,CAACuB,MAAM,EAAE,UAAAlB,SAAS;QAAA,OAAI,CAAC,IAAAmB,SAAA,CAAAF,OAAA,EAAUjB,SAAS,CAACoB,QAAQ,CAAC;MAAA,EAAC;MACnGC,eAAe,EAAEd,mBAAmB;MACpCe,aAAa,EAAE,IAAAN,QAAA,CAAAC,OAAA,EAAS7B,OAAO,CAACU,KAAK,CAACwB,aAAa,CAACJ,MAAM,EAAE,UAAAK,QAAQ,EAAI;QACtE,IAAI,IAAAJ,SAAA,CAAAF,OAAA,EAAUM,QAAQ,CAAC,IAAI,IAAAJ,SAAA,CAAAF,OAAA,EAAUM,QAAQ,CAACH,QAAQ,CAAC,EAAE;UACvD,OAAO,KAAK;QACd;QAEA,IAAMI,IAAI,GAAGC,MAAM,CAACD,IAAI,CAACD,QAAQ,CAACH,QAAQ,CAAC;QAC3C,IAAII,IAAI,CAACE,MAAM,KAAK,CAAC,IAAIF,IAAI,CAACG,GAAG,CAAC,CAAC,KAAK,WAAW,IAAI,IAAAR,SAAA,CAAAF,OAAA,EAAUM,QAAQ,CAACH,QAAQ,CAAC,WAAW,CAAC,CAAC,EAAE;UAChG,OAAO,KAAK;QACd;QAEA,OAAO,IAAI;MACb,CAAC;IACH,CAAC,CAAC;EACJ;EAEA,OAAO;IACLf,OAAO,EAAPA,OAAO;IACPL,SAAS,EAAEL,iBAAiB;IAC5BiC,MAAM,EAAEtB,cAAc;IACtBR,KAAK,EAAEV,OAAO,CAACU;EACjB,CAAC;AACH,CAAC;AAAC+B,OAAA,CAAA1C,SAAA,GAAAA,SAAA"}