{"version":3,"file":"FocusTrapZone.js","names":["EventListener","React","ReactDOM","PropTypes","getElementType","getUnhandledProps","getNextElement","getFirstTabbable","getLastTabbable","getWindow","getDocument","focusAsync","HIDDEN_FROM_ACC_TREE","handleRef","FocusTrapZone","_React$Component","_inheritsLoose","_this","_len","arguments","length","args","Array","_key","call","apply","concat","_root","current","_previouslyFocusedElementOutsideTrapZone","_previouslyFocusedElementInTrapZone","_firstBumper","createRef","_lastBumper","_hasFocus","windowRef","elem","findDOMNode","shouldHandleOutsideClick","props","isClickableOutsideFocusTrap","focusTriggerOnOutsideClick","element","innerRef","_onRootFocus","ev","onFocus","_onRootBlur","onBlur","relatedTarget","doc","activeElement","contains","_onFirstBumperFocus","_onBumperFocus","_onLastBumperFocus","isFirstBumper","currentBumper","nextFocusable","_isBumper","_findElementAndFocusAsync","focus","_enableFocusTrapZone","_this$props$disabled","disabled","_focusStack","push","_assertThisInitialized","_bringFocusIntoZone","_hideContentFromAccessibilityTree","_this$props$disableFi","disableFirstFocus","_getPreviouslyFocusedElementOutsideTrapZone","_releaseFocusTrapZone","ignoreExternalFocusing","filter","value","body","_focusAsync","preventScroll","preventScrollOnRestoreFocus","lastActiveFocusTrap","_showContentInAccessibilityTree","parentElement","removeAttribute","_this$props","focusPreviouslyFocusedInnerElement","firstFocusableSelector","focusSelector","firstFocusableChild","querySelector","firstChild","_onFocusCapture","onFocusCapture","target","currentTarget","_forceFocusInTrap","triggeredElement","preventDefault","stopPropagation","_handleOutsideFocus","focusedElement","_handleOutsideClick","clickedElement","_this$props2","isOutsideFocusTrapZone","isOutsideTriggerElement","_onKeyboardHandler","onKeyDown","elementToFocusOnDismiss","previouslyFocusedElement","bodyChildren","children","console","warn","index","currentChild","isOrHasFocusTrapZone","isAriaLiveRegion","hasAttribute","getAttribute","setAttribute","hiddenElements","querySelectorAll","_proto","prototype","componentDidMount","componentDidUpdate","prevProps","_this$props3","forceFocusInsideTrapOnComponentUpdate","forceFocusInsideTrapOnOutsideFocus","prevForceFocusInsideTrap","undefined","newForceFocusInsideTrap","prevDisabled","newDisabled","componentWillUnmount","render","_this$props4","className","ariaLabelledBy","_this$props4$disabled","unhandledProps","_keys","propTypes","ElementType","bumperProps","style","pointerEvents","position","tabIndex","createElement","Fragment","_extends","ref","capture","listener","targetRef","type","options","Component","as","elementType","string","object","bool","any","defaultProps"],"sources":["FocusZone/FocusTrapZone.tsx"],"sourcesContent":["import { EventListener } from '@fluentui/react-component-event-listener';\nimport * as React from 'react';\nimport * as ReactDOM from 'react-dom';\nimport * as PropTypes from 'prop-types';\nimport * as _ from 'lodash';\n\nimport { getElementType } from '../utils/getElementType';\nimport { getUnhandledProps } from '../utils/getUnhandledProps';\nimport {\n  getNextElement,\n  getFirstTabbable,\n  getLastTabbable,\n  getWindow,\n  getDocument,\n  focusAsync,\n  HIDDEN_FROM_ACC_TREE,\n} from './focusUtilities';\nimport { FocusTrapZoneProps } from './FocusTrapZone.types';\nimport { handleRef } from '@fluentui/react-component-ref';\n\n/** FocusTrapZone is used to trap the focus in any html element placed in body\n *  and hide other elements outside of Focus Trap Zone from accessibility tree.\n *  Pressing tab will circle focus within the inner focusable elements of the FocusTrapZone. */\nexport class FocusTrapZone extends React.Component<FocusTrapZoneProps, {}> {\n  static _focusStack: FocusTrapZone[] = [];\n\n  _root: { current: HTMLElement | null } = { current: null };\n\n  _previouslyFocusedElementOutsideTrapZone?: HTMLElement;\n  _previouslyFocusedElementInTrapZone?: HTMLElement;\n\n  _firstBumper = React.createRef<HTMLDivElement>();\n  _lastBumper = React.createRef<HTMLDivElement>();\n  _hasFocus: boolean = false;\n\n  windowRef = React.createRef<Window>() as React.MutableRefObject<Window>;\n\n  // @ts-ignore\n  createRef = elem => {\n    this._root.current = ReactDOM.findDOMNode(elem) as HTMLElement;\n    // @ts-ignore\n    this.windowRef.current = getWindow(this._root.current);\n  };\n\n  shouldHandleOutsideClick = () => !this.props.isClickableOutsideFocusTrap || !this.props.focusTriggerOnOutsideClick;\n\n  static propTypes = {\n    as: PropTypes.elementType,\n    className: PropTypes.string,\n    elementToFocusOnDismiss: PropTypes.object,\n    ariaLabelledBy: PropTypes.string,\n    isClickableOutsideFocusTrap: PropTypes.bool,\n    ignoreExternalFocusing: PropTypes.bool,\n    forceFocusInsideTrapOnOutsideFocus: PropTypes.bool,\n    forceFocusInsideTrapOnComponentUpdate: PropTypes.bool,\n    firstFocusableSelector: PropTypes.string,\n    disableFirstFocus: PropTypes.bool,\n    focusPreviouslyFocusedInnerElement: PropTypes.bool,\n    focusTriggerOnOutsideClick: PropTypes.bool,\n    preventScrollOnRestoreFocus: PropTypes.bool,\n    innerRef: PropTypes.any,\n  };\n\n  static defaultProps: FocusTrapZoneProps = {\n    as: 'div',\n    isClickableOutsideFocusTrap: true,\n    forceFocusInsideTrapOnOutsideFocus: false,\n  };\n\n  componentDidMount(): void {\n    this._enableFocusTrapZone();\n  }\n\n  componentDidUpdate(prevProps: FocusTrapZoneProps): void {\n    const { forceFocusInsideTrapOnComponentUpdate, forceFocusInsideTrapOnOutsideFocus, disabled } = this.props;\n    const doc = getDocument(this._root.current);\n    // @ts-ignore\n    const activeElement = doc.activeElement as HTMLElement;\n\n    // if after componentDidUpdate focus is not inside the focus trap, bring it back\n    if (\n      !disabled &&\n      // @ts-ignore\n      !this._root.current.contains(activeElement) &&\n      forceFocusInsideTrapOnComponentUpdate\n    ) {\n      this._bringFocusIntoZone();\n      return;\n    }\n\n    const prevForceFocusInsideTrap =\n      prevProps.forceFocusInsideTrapOnOutsideFocus !== undefined ? prevProps.forceFocusInsideTrapOnOutsideFocus : true;\n    const newForceFocusInsideTrap =\n      forceFocusInsideTrapOnOutsideFocus !== undefined ? forceFocusInsideTrapOnOutsideFocus : true;\n    const prevDisabled = prevProps.disabled !== undefined ? prevProps.disabled : false;\n    const newDisabled = disabled !== undefined ? disabled : false;\n\n    if ((!prevForceFocusInsideTrap && newForceFocusInsideTrap) || (prevDisabled && !newDisabled)) {\n      // Transition from forceFocusInsideTrap / FTZ disabled to enabled.\n      // Emulate what happens when a FocusTrapZone gets mounted.\n      this._enableFocusTrapZone();\n    } else if ((prevForceFocusInsideTrap && !newForceFocusInsideTrap) || (!prevDisabled && newDisabled)) {\n      // Transition from forceFocusInsideTrap / FTZ enabled to disabled.\n      // Emulate what happens when a FocusTrapZone gets unmounted.\n      this._releaseFocusTrapZone();\n    }\n  }\n\n  componentWillUnmount(): void {\n    // don't handle return focus unless forceFocusInsideTrapOnOutsideFocus is true or focus is still within FocusTrapZone\n    const doc = getDocument(this._root.current);\n    if (\n      !this.props.disabled ||\n      this.props.forceFocusInsideTrapOnOutsideFocus ||\n      // @ts-ignore\n      !this._root.current.contains(doc.activeElement as HTMLElement)\n    ) {\n      this._releaseFocusTrapZone();\n    }\n\n    // Dispose of element references so the DOM Nodes can be garbage-collected\n    delete this._previouslyFocusedElementInTrapZone;\n    delete this._previouslyFocusedElementOutsideTrapZone;\n  }\n\n  handleRef = (element: HTMLElement) => {\n    this.createRef(element);\n    handleRef(this.props.innerRef, element);\n  };\n\n  render(): JSX.Element {\n    const { className, forceFocusInsideTrapOnOutsideFocus, ariaLabelledBy, disabled = false } = this.props;\n    const unhandledProps = getUnhandledProps(_.keys(FocusTrapZone.propTypes) as any, this.props);\n    const ElementType = getElementType(this.props);\n\n    const bumperProps = {\n      'aria-hidden': true,\n      style: {\n        pointerEvents: 'none',\n        position: 'fixed', // 'fixed' prevents browsers from scrolling to bumpers when viewport does not contain them\n      },\n      tabIndex: disabled ? -1 : 0, // make bumpers tabbable only when enabled\n      'data-is-visible': true,\n    } as React.HTMLAttributes<HTMLDivElement>;\n\n    return (\n      <>\n        <ElementType\n          {...unhandledProps}\n          className={className}\n          ref={this.handleRef}\n          aria-labelledby={ariaLabelledBy}\n          onKeyDown={this._onKeyboardHandler}\n          onFocusCapture={this._onFocusCapture}\n          onFocus={this._onRootFocus}\n          onBlur={this._onRootBlur}\n        >\n          <div {...bumperProps} ref={this._firstBumper} onFocus={this._onFirstBumperFocus} />\n          {this.props.children}\n          <div {...bumperProps} ref={this._lastBumper} onFocus={this._onLastBumperFocus} />\n        </ElementType>\n\n        {forceFocusInsideTrapOnOutsideFocus && (\n          <EventListener capture listener={this._handleOutsideFocus} targetRef={this.windowRef} type=\"focus\" />\n        )}\n        {this.shouldHandleOutsideClick() && (\n          <EventListener capture listener={this._handleOutsideClick} targetRef={this.windowRef} type=\"click\" />\n        )}\n      </>\n    );\n  }\n\n  _onRootFocus = (ev: React.FocusEvent<HTMLDivElement>) => {\n    if (this.props.onFocus) {\n      this.props.onFocus(ev);\n    }\n\n    this._hasFocus = true;\n  };\n\n  _onRootBlur = (ev: React.FocusEvent<HTMLDivElement>) => {\n    if (this.props.onBlur) {\n      this.props.onBlur(ev);\n    }\n\n    let relatedTarget = ev.relatedTarget;\n    if (ev.relatedTarget === null) {\n      // In IE11, due to lack of support, event.relatedTarget is always\n      // null making every onBlur call to be \"outside\" of the ComboBox\n      // even when it's not. Using document.activeElement is another way\n      // for us to be able to get what the relatedTarget without relying\n      // on the event\n      const doc = getDocument(this._root.current);\n      // @ts-ignore\n      relatedTarget = doc.activeElement as Element;\n    }\n\n    // @ts-ignore\n    if (!this._root.current.contains(relatedTarget as HTMLElement)) {\n      this._hasFocus = false;\n    }\n  };\n\n  _onFirstBumperFocus = () => {\n    this._onBumperFocus(true);\n  };\n\n  _onLastBumperFocus = () => {\n    this._onBumperFocus(false);\n  };\n\n  _isBumper(element: HTMLElement): boolean {\n    return element === this._firstBumper.current || element === this._lastBumper.current;\n  }\n\n  _onBumperFocus = (isFirstBumper: boolean) => {\n    if (!this._root.current) {\n      return;\n    }\n\n    const currentBumper = (\n      isFirstBumper === this._hasFocus ? this._lastBumper.current : this._firstBumper.current\n    ) as HTMLElement;\n\n    const nextFocusable =\n      isFirstBumper === this._hasFocus\n        ? getLastTabbable(this._root.current, currentBumper, true, false)\n        : getFirstTabbable(this._root.current, currentBumper, true, false);\n\n    if (nextFocusable) {\n      if (this._isBumper(nextFocusable)) {\n        // This can happen when FTZ contains no tabbable elements. Focus will take care of finding a focusable element in FTZ.\n        this._findElementAndFocusAsync();\n      } else {\n        nextFocusable.focus();\n      }\n    }\n  };\n\n  _focusAsync(element: HTMLElement, options?: FocusOptions): void {\n    if (!this._isBumper(element)) {\n      focusAsync(element, options);\n    }\n  }\n\n  _enableFocusTrapZone = () => {\n    const { disabled = false } = this.props;\n    if (disabled) {\n      return;\n    }\n\n    FocusTrapZone._focusStack.push(this);\n\n    this._bringFocusIntoZone();\n    this._hideContentFromAccessibilityTree();\n  };\n\n  _bringFocusIntoZone = () => {\n    const { disableFirstFocus = false } = this.props;\n\n    this._previouslyFocusedElementOutsideTrapZone = this._getPreviouslyFocusedElementOutsideTrapZone();\n\n    if (\n      // @ts-ignore\n      !this._root.current.contains(this._previouslyFocusedElementOutsideTrapZone) &&\n      !disableFirstFocus\n    ) {\n      this._findElementAndFocusAsync();\n    }\n  };\n\n  _releaseFocusTrapZone = () => {\n    const { ignoreExternalFocusing } = this.props;\n\n    FocusTrapZone._focusStack = FocusTrapZone._focusStack.filter((value: FocusTrapZone) => {\n      return this !== value;\n    });\n\n    // try to focus element which triggered FocusTrapZone - prviously focused element outside trap zone\n    const doc = getDocument(this._root.current);\n    // @ts-ignore\n    const activeElement = doc.activeElement as HTMLElement;\n    if (\n      !ignoreExternalFocusing &&\n      this._previouslyFocusedElementOutsideTrapZone &&\n      // @ts-ignore\n      (this._root.current.contains(activeElement) || activeElement === doc.body)\n    ) {\n      this._focusAsync(this._previouslyFocusedElementOutsideTrapZone, {\n        preventScroll: this.props.preventScrollOnRestoreFocus,\n      });\n    }\n\n    // if last active focus trap zone is going to be released - show previously hidden content in accessibility tree\n    const lastActiveFocusTrap =\n      FocusTrapZone._focusStack.length && FocusTrapZone._focusStack[FocusTrapZone._focusStack.length - 1];\n\n    if (!lastActiveFocusTrap) {\n      this._showContentInAccessibilityTree();\n    } else if (lastActiveFocusTrap._root.current) {\n      let element = lastActiveFocusTrap._root.current;\n      // aria hidden attributes are added to direct children of body. It can be the focusTrapZone root itself, or its parent\n      while (element.parentElement && element.parentElement !== doc?.body) {\n        element = element.parentElement;\n      }\n      element.removeAttribute(HIDDEN_FROM_ACC_TREE);\n      element.removeAttribute('aria-hidden');\n    }\n  };\n\n  _findElementAndFocusAsync = () => {\n    if (!this._root.current) {\n      return;\n    }\n\n    const { focusPreviouslyFocusedInnerElement, firstFocusableSelector } = this.props;\n\n    if (\n      focusPreviouslyFocusedInnerElement &&\n      this._previouslyFocusedElementInTrapZone &&\n      this._root.current.contains(this._previouslyFocusedElementInTrapZone)\n    ) {\n      // focus on the last item that had focus in the zone before we left the zone\n      this._focusAsync(this._previouslyFocusedElementInTrapZone);\n      return;\n    }\n\n    const focusSelector =\n      firstFocusableSelector &&\n      (typeof firstFocusableSelector === 'string' ? firstFocusableSelector : firstFocusableSelector());\n\n    let firstFocusableChild: HTMLElement | null = null;\n\n    if (focusSelector) {\n      firstFocusableChild = this._root.current.querySelector(focusSelector);\n    }\n\n    // Fall back to first element if query selector did not match any elements.\n    if (!firstFocusableChild) {\n      firstFocusableChild = getNextElement(\n        this._root.current,\n        this._root.current.firstChild as HTMLElement,\n        false,\n        false,\n        false,\n        true,\n      );\n    }\n\n    firstFocusableChild && this._focusAsync(firstFocusableChild);\n  };\n\n  _onFocusCapture = (ev: React.FocusEvent<HTMLDivElement>) => {\n    this.props.onFocusCapture && this.props.onFocusCapture(ev);\n    if (ev.target !== ev.currentTarget && !this._isBumper(ev.target)) {\n      // every time focus changes within the trap zone, remember the focused element so that\n      // it can be restored if focus leaves the pane and returns via keystroke (i.e. via a call to this.focus(true))\n      this._previouslyFocusedElementInTrapZone = ev.target as HTMLElement;\n    }\n  };\n\n  _forceFocusInTrap = (ev: Event, triggeredElement: HTMLElement) => {\n    if (FocusTrapZone._focusStack.length && this === FocusTrapZone._focusStack[FocusTrapZone._focusStack.length - 1]) {\n      // @ts-ignore\n      if (!this._root.current.contains(triggeredElement)) {\n        this._findElementAndFocusAsync();\n        ev.preventDefault();\n        ev.stopPropagation();\n      }\n    }\n  };\n\n  _handleOutsideFocus = (ev: FocusEvent): void => {\n    const doc = getDocument(this._root.current);\n    // @ts-ignore\n    const focusedElement = doc.activeElement as HTMLElement;\n    focusedElement && this._forceFocusInTrap(ev, focusedElement);\n  };\n\n  _handleOutsideClick = (ev: MouseEvent): void => {\n    const clickedElement = ev.target as HTMLElement;\n    const { isClickableOutsideFocusTrap, focusTriggerOnOutsideClick } = this.props;\n\n    if (!isClickableOutsideFocusTrap) {\n      clickedElement && this._forceFocusInTrap(ev, clickedElement);\n    } else if (!focusTriggerOnOutsideClick) {\n      const isOutsideFocusTrapZone = this._root.current && !this._root.current.contains(clickedElement);\n      const isOutsideTriggerElement =\n        this._previouslyFocusedElementOutsideTrapZone &&\n        !this._previouslyFocusedElementOutsideTrapZone.contains(clickedElement);\n      if (isOutsideFocusTrapZone && isOutsideTriggerElement) {\n        // set it to NULL, so the trigger will not be focused on componentWillUnmount\n        // @ts-ignore\n        this._previouslyFocusedElementOutsideTrapZone = null;\n      }\n    }\n  };\n\n  _onKeyboardHandler = (ev: React.KeyboardEvent<HTMLDivElement>): void => {\n    if (this.props.onKeyDown) {\n      this.props.onKeyDown(ev);\n    }\n\n    // do not propogate keyboard events outside focus trap zone\n    // https://github.com/microsoft/fluent-ui-react/pull/1180\n    ev.stopPropagation();\n  };\n\n  _getPreviouslyFocusedElementOutsideTrapZone = () => {\n    const { elementToFocusOnDismiss } = this.props;\n    let previouslyFocusedElement = this._previouslyFocusedElementOutsideTrapZone;\n\n    if (elementToFocusOnDismiss && previouslyFocusedElement !== elementToFocusOnDismiss) {\n      previouslyFocusedElement = elementToFocusOnDismiss;\n    } else if (!previouslyFocusedElement) {\n      const doc = getDocument(this._root.current);\n      // @ts-ignore\n      previouslyFocusedElement = doc.activeElement as HTMLElement;\n    }\n\n    return previouslyFocusedElement;\n  };\n\n  _hideContentFromAccessibilityTree = () => {\n    const doc = getDocument(this._root.current);\n    // @ts-ignore\n    const bodyChildren = (doc.body && doc.body.children) || [];\n\n    // @ts-ignore\n    if (bodyChildren.length && !doc.body.contains(this._root.current)) {\n      // In case popup render options will change\n      /* eslint-disable-next-line no-console */\n      console.warn(\n        'Body element does not contain trap zone element. Please, ensure the trap zone element is placed inside body, so it will work properly.',\n      );\n    }\n\n    for (let index = 0; index < bodyChildren.length; index++) {\n      const currentChild = bodyChildren[index] as HTMLElement;\n      const isOrHasFocusTrapZone = currentChild === this._root.current || currentChild.contains(this._root.current);\n      const isAriaLiveRegion = currentChild.hasAttribute('aria-live');\n\n      if (!isOrHasFocusTrapZone && !isAriaLiveRegion && currentChild.getAttribute('aria-hidden') !== 'true') {\n        currentChild.setAttribute('aria-hidden', 'true');\n        currentChild.setAttribute(HIDDEN_FROM_ACC_TREE, 'true');\n      }\n    }\n  };\n\n  _showContentInAccessibilityTree = () => {\n    const doc = getDocument(this._root.current);\n    // @ts-ignore\n    const hiddenElements = doc.querySelectorAll(`[${HIDDEN_FROM_ACC_TREE}=\"true\"]`);\n    for (let index = 0; index < hiddenElements.length; index++) {\n      const element = hiddenElements[index];\n      element.removeAttribute('aria-hidden');\n      element.removeAttribute(HIDDEN_FROM_ACC_TREE);\n    }\n  };\n}\n"],"mappings":"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"}