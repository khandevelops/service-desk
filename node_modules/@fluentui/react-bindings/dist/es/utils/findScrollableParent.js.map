{"version":3,"file":"findScrollableParent.js","names":["getDocument","getWindow","DATA_IS_SCROLLABLE_ATTRIBUTE","findScrollableParent","startingElement","el","doc","body","getAttribute","parentElement","computedStyles","getComputedStyle","overflowY","getPropertyValue"],"sources":["utils/findScrollableParent.ts"],"sourcesContent":["import { getDocument } from './getDocument';\nimport { getWindow } from './getWindow';\n\n/**\n * Placing this attribute on scrollable divs optimizes detection to know\n * if the div is scrollable or not (given we can avoid expensive operations\n * like getComputedStyle.)\n *\n * @public\n */\nexport const DATA_IS_SCROLLABLE_ATTRIBUTE = 'data-is-scrollable';\n\n/**\n * Traverses up the DOM for the element with the data-is-scrollable=true attribute, or returns\n * document.body.\n *\n * @public\n */\nexport function findScrollableParent(startingElement: HTMLElement | null): HTMLElement | Window | undefined | null {\n  let el: HTMLElement | Window | undefined | null = startingElement;\n  const doc = getDocument(startingElement)!;\n\n  // First do a quick scan for the scrollable attribute.\n  while (el && el !== doc.body) {\n    if (el.getAttribute(DATA_IS_SCROLLABLE_ATTRIBUTE) === 'true') {\n      return el;\n    }\n    el = el.parentElement;\n  }\n\n  // If we haven't found it, the use the slower method: compute styles to evaluate if overflow is set.\n  el = startingElement;\n\n  while (el && el !== doc.body) {\n    if (el.getAttribute(DATA_IS_SCROLLABLE_ATTRIBUTE) !== 'false') {\n      const computedStyles = getComputedStyle(el);\n      const overflowY = computedStyles ? computedStyles.getPropertyValue('overflow-y') : '';\n\n      if (overflowY && (overflowY === 'scroll' || overflowY === 'auto')) {\n        return el;\n      }\n    }\n\n    el = el.parentElement;\n  }\n\n  // Fall back to window scroll.\n  if (!el || el === doc.body) {\n    el = getWindow(startingElement);\n  }\n\n  return el;\n}\n"],"mappings":"AAAA,SAASA,WAAW,QAAQ,eAAe;AAC3C,SAASC,SAAS,QAAQ,aAAa;;AAEvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,IAAMC,4BAA4B,GAAG,oBAAoB;;AAEhE;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,SAASC,oBAAoBA,CAACC,eAAmC,EAA2C;EACjH,IAAIC,EAA2C,GAAGD,eAAe;EACjE,IAAME,GAAG,GAAGN,WAAW,CAACI,eAAe,CAAE;;EAEzC;EACA,OAAOC,EAAE,IAAIA,EAAE,KAAKC,GAAG,CAACC,IAAI,EAAE;IAC5B,IAAIF,EAAE,CAACG,YAAY,CAACN,4BAA4B,CAAC,KAAK,MAAM,EAAE;MAC5D,OAAOG,EAAE;IACX;IACAA,EAAE,GAAGA,EAAE,CAACI,aAAa;EACvB;;EAEA;EACAJ,EAAE,GAAGD,eAAe;EAEpB,OAAOC,EAAE,IAAIA,EAAE,KAAKC,GAAG,CAACC,IAAI,EAAE;IAC5B,IAAIF,EAAE,CAACG,YAAY,CAACN,4BAA4B,CAAC,KAAK,OAAO,EAAE;MAC7D,IAAMQ,cAAc,GAAGC,gBAAgB,CAACN,EAAE,CAAC;MAC3C,IAAMO,SAAS,GAAGF,cAAc,GAAGA,cAAc,CAACG,gBAAgB,CAAC,YAAY,CAAC,GAAG,EAAE;MAErF,IAAID,SAAS,KAAKA,SAAS,KAAK,QAAQ,IAAIA,SAAS,KAAK,MAAM,CAAC,EAAE;QACjE,OAAOP,EAAE;MACX;IACF;IAEAA,EAAE,GAAGA,EAAE,CAACI,aAAa;EACvB;;EAEA;EACA,IAAI,CAACJ,EAAE,IAAIA,EAAE,KAAKC,GAAG,CAACC,IAAI,EAAE;IAC1BF,EAAE,GAAGJ,SAAS,CAACG,eAAe,CAAC;EACjC;EAEA,OAAOC,EAAE;AACX"}