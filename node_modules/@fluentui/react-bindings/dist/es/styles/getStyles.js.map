{"version":3,"file":"getStyles.js","names":["isDebugEnabled","resolveVariables","resolveStyles","getStyles","options","primaryDisplayName","telemetry","telemetryPartStart","enabled","performance","now","resolvedVariables","allDisplayNames","theme","inlineStylesProps","variables","enableVariablesCaching","msResolveVariablesTotal","_resolveStyles","classes","resolvedStyles","resolvedStylesDebug","process","env","NODE_ENV","saveDebug","componentName","join","componentVariables","_filter","_debug","_isEmpty","resolved","componentStyles","siteVariables","siteVars","keys","Object","length","pop","styles"],"sources":["styles/getStyles.ts"],"sourcesContent":["import { ComponentSlotStylesResolved, ComponentVariablesObject, isDebugEnabled } from '@fluentui/styles';\nimport * as _ from 'lodash';\n\nimport { ProviderContextPrepared } from '../context';\nimport { ComponentSlotClasses, ResolveStylesOptions } from '../styles/types';\nimport { resolveVariables } from './resolveVariables';\nimport { resolveStyles } from './resolveStyles';\n\nexport type GetStylesResult = {\n  classes: ComponentSlotClasses;\n  variables: ComponentVariablesObject;\n  styles: ComponentSlotStylesResolved;\n  theme: ProviderContextPrepared['theme'];\n};\n\nexport const getStyles = (options: ResolveStylesOptions): GetStylesResult => {\n  const { primaryDisplayName, telemetry } = options;\n\n  //\n  // To compute styles we are going through three stages:\n  // - resolve variables (siteVariables => componentVariables + props.variables)\n  // - resolve styles (with resolvedVariables & props.styles & props.design)\n  // - compute classes (with resolvedStyles)\n  // - conditionally add sources for evaluating debug information to component\n\n  const telemetryPartStart = telemetry?.enabled ? performance.now() : 0;\n  const resolvedVariables = resolveVariables(\n    options.allDisplayNames,\n    options.theme,\n    options.inlineStylesProps.variables,\n    options.performance.enableVariablesCaching,\n  );\n\n  if (telemetry?.enabled && telemetry.performance[primaryDisplayName]) {\n    telemetry.performance[primaryDisplayName].msResolveVariablesTotal += performance.now() - telemetryPartStart;\n  }\n\n  const { classes, resolvedStyles, resolvedStylesDebug } = resolveStyles(options, resolvedVariables);\n\n  // conditionally add sources for evaluating debug information to component\n  if (process.env.NODE_ENV !== 'production' && isDebugEnabled) {\n    options.saveDebug({\n      componentName: options.allDisplayNames.join(':'),\n      componentVariables: _.filter(resolvedVariables._debug, variables => !_.isEmpty(variables.resolved)),\n      componentStyles: resolvedStylesDebug,\n      siteVariables: _.filter(options.theme.siteVariables._debug, siteVars => {\n        if (_.isEmpty(siteVars) || _.isEmpty(siteVars.resolved)) {\n          return false;\n        }\n\n        const keys = Object.keys(siteVars.resolved);\n        if (keys.length === 1 && keys.pop() === 'fontSizes' && _.isEmpty(siteVars.resolved['fontSizes'])) {\n          return false;\n        }\n\n        return true;\n      }),\n    });\n  }\n\n  return {\n    classes,\n    variables: resolvedVariables,\n    styles: resolvedStyles,\n    theme: options.theme,\n  };\n};\n"],"mappings":";;AAAA,SAAgEA,cAAc,QAAQ,kBAAkB;AAKxG,SAASC,gBAAgB,QAAQ,oBAAoB;AACrD,SAASC,aAAa,QAAQ,iBAAiB;AAS/C,OAAO,IAAMC,SAAS,GAAG,SAAZA,SAASA,CAAIC,OAA6B,EAAsB;EAC3E,IAAQC,kBAAkB,GAAgBD,OAAO,CAAzCC,kBAAkB;IAAEC,SAAS,GAAKF,OAAO,CAArBE,SAAS;;EAErC;EACA;EACA;EACA;EACA;EACA;;EAEA,IAAMC,kBAAkB,GAAGD,SAAS,YAATA,SAAS,CAAEE,OAAO,GAAGC,WAAW,CAACC,GAAG,CAAC,CAAC,GAAG,CAAC;EACrE,IAAMC,iBAAiB,GAAGV,gBAAgB,CACxCG,OAAO,CAACQ,eAAe,EACvBR,OAAO,CAACS,KAAK,EACbT,OAAO,CAACU,iBAAiB,CAACC,SAAS,EACnCX,OAAO,CAACK,WAAW,CAACO,sBACtB,CAAC;EAED,IAAIV,SAAS,YAATA,SAAS,CAAEE,OAAO,IAAIF,SAAS,CAACG,WAAW,CAACJ,kBAAkB,CAAC,EAAE;IACnEC,SAAS,CAACG,WAAW,CAACJ,kBAAkB,CAAC,CAACY,uBAAuB,IAAIR,WAAW,CAACC,GAAG,CAAC,CAAC,GAAGH,kBAAkB;EAC7G;EAEA,IAAAW,cAAA,GAAyDhB,aAAa,CAACE,OAAO,EAAEO,iBAAiB,CAAC;IAA1FQ,OAAO,GAAAD,cAAA,CAAPC,OAAO;IAAEC,cAAc,GAAAF,cAAA,CAAdE,cAAc;IAAEC,mBAAmB,GAAAH,cAAA,CAAnBG,mBAAmB;;EAEpD;EACA,IAAIC,OAAO,CAACC,GAAG,CAACC,QAAQ,KAAK,YAAY,IAAIxB,cAAc,EAAE;IAC3DI,OAAO,CAACqB,SAAS,CAAC;MAChBC,aAAa,EAAEtB,OAAO,CAACQ,eAAe,CAACe,IAAI,CAAC,GAAG,CAAC;MAChDC,kBAAkB,EAAEC,OAAA,CAASlB,iBAAiB,CAACmB,MAAM,EAAE,UAAAf,SAAS;QAAA,OAAI,CAACgB,QAAA,CAAUhB,SAAS,CAACiB,QAAQ,CAAC;MAAA,EAAC;MACnGC,eAAe,EAAEZ,mBAAmB;MACpCa,aAAa,EAAEL,OAAA,CAASzB,OAAO,CAACS,KAAK,CAACqB,aAAa,CAACJ,MAAM,EAAE,UAAAK,QAAQ,EAAI;QACtE,IAAIJ,QAAA,CAAUI,QAAQ,CAAC,IAAIJ,QAAA,CAAUI,QAAQ,CAACH,QAAQ,CAAC,EAAE;UACvD,OAAO,KAAK;QACd;QAEA,IAAMI,IAAI,GAAGC,MAAM,CAACD,IAAI,CAACD,QAAQ,CAACH,QAAQ,CAAC;QAC3C,IAAII,IAAI,CAACE,MAAM,KAAK,CAAC,IAAIF,IAAI,CAACG,GAAG,CAAC,CAAC,KAAK,WAAW,IAAIR,QAAA,CAAUI,QAAQ,CAACH,QAAQ,CAAC,WAAW,CAAC,CAAC,EAAE;UAChG,OAAO,KAAK;QACd;QAEA,OAAO,IAAI;MACb,CAAC;IACH,CAAC,CAAC;EACJ;EAEA,OAAO;IACLb,OAAO,EAAPA,OAAO;IACPJ,SAAS,EAAEJ,iBAAiB;IAC5B6B,MAAM,EAAEpB,cAAc;IACtBP,KAAK,EAAET,OAAO,CAACS;EACjB,CAAC;AACH,CAAC"}