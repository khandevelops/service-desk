{"version":3,"file":"mergeComposeOptions.js","names":["defaultComposeOptions","computeDisplayNames","mergeComposeOptions","input","inputOptions","parentOptions","mapPropsToSlotPropsChain","slotProps","concat","resolveSlotProps","props","reduce","acc","definition","nextProps","Object","assign","slots","keys","mergedSlotProps","forEach","slot","inputClasses","Array","isArray","classes","state","ref","options","className","displayName","displayNames","mapPropsToStylesPropsChain","mapPropsToStylesProps","render","handledProps","overrideStyles","shorthandConfig"],"sources":["compose/mergeComposeOptions.ts"],"sourcesContent":["import { defaultComposeOptions, ComposeOptions, ComposePreparedOptions, Input } from './consts';\nimport { computeDisplayNames } from './computeDisplayNames';\n\nexport function mergeComposeOptions(\n  input: Input,\n  inputOptions: ComposeOptions,\n  parentOptions: Required<ComposePreparedOptions> = defaultComposeOptions,\n): Required<ComposePreparedOptions> {\n  const mapPropsToSlotPropsChain = inputOptions.slotProps\n    ? [...parentOptions.slotProps, inputOptions.slotProps]\n    : parentOptions.slotProps;\n\n  const resolveSlotProps = <P = {}>(props: P) =>\n    mapPropsToSlotPropsChain.reduce<Record<string, object>>((acc, definition) => {\n      const nextProps = { ...definition(props) };\n      const slots: string[] = [...Object.keys(acc), ...Object.keys(nextProps)];\n      const mergedSlotProps: Record<string, object> = {};\n\n      slots.forEach(slot => {\n        if (!mergedSlotProps[slot]) {\n          mergedSlotProps[slot] = {\n            ...acc[slot],\n            ...nextProps[slot],\n          };\n        }\n      });\n\n      return mergedSlotProps;\n    }, {});\n\n  const inputClasses = Array.isArray(inputOptions.classes) ? inputOptions.classes : [inputOptions.classes];\n\n  const state: ComposePreparedOptions['state'] = (props, ref, options) => {\n    if (inputOptions.state) {\n      return inputOptions.state(parentOptions.state(props, ref, options), ref, options);\n    }\n\n    return parentOptions.state(props, ref, options);\n  };\n\n  return {\n    className: inputOptions.className || parentOptions.className,\n    classes: [...parentOptions.classes, ...inputClasses],\n\n    displayName: inputOptions.displayName || parentOptions.displayName,\n    displayNames: computeDisplayNames(inputOptions, parentOptions),\n\n    mapPropsToStylesPropsChain: inputOptions.mapPropsToStylesProps\n      ? [...parentOptions.mapPropsToStylesPropsChain, inputOptions.mapPropsToStylesProps]\n      : parentOptions.mapPropsToStylesPropsChain,\n\n    render: typeof input === 'function' ? input : parentOptions.render,\n\n    handledProps: [...parentOptions.handledProps, ...((inputOptions.handledProps as never[]) || ([] as never[]))],\n\n    overrideStyles: inputOptions.overrideStyles || false,\n\n    slots: {\n      ...parentOptions.slots,\n      ...inputOptions.slots,\n    },\n\n    slotProps: mapPropsToSlotPropsChain,\n\n    state,\n\n    resolveSlotProps,\n\n    shorthandConfig: {\n      ...parentOptions.shorthandConfig,\n      ...inputOptions.shorthandConfig,\n    },\n  };\n}\n"],"mappings":"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"}