{"version":3,"file":"useIFrameFocusDispatch.js","names":["React","FUI_FRAME_EVENT","useIFrameFocusDispatch","enableFrameFocusDispatch","targetDocument","pollDuration","timeoutRef","useRef","useEffect","_targetDocument$defau","current","defaultView","setInterval","activeElement","tagName","event","CustomEvent","bubbles","dispatchEvent","_targetDocument$defau2","clearTimeout"],"sources":["hooks/useIFrameFocusDispatch.ts"],"sourcesContent":["import * as React from 'react';\n\nexport const FUI_FRAME_EVENT = 'fuiframefocus';\n\n/**\n * Watch the `document.activeElement` and dispatch a custom event if the current active element is a iframe.\n */\nexport const useIFrameFocusDispatch = (\n  enableFrameFocusDispatch: boolean,\n  targetDocument: Document,\n  pollDuration: number = 1000,\n) => {\n  const timeoutRef = React.useRef<number>();\n\n  React.useEffect(() => {\n    if (enableFrameFocusDispatch) {\n      timeoutRef.current = targetDocument?.defaultView?.setInterval(() => {\n        const activeElement = targetDocument?.activeElement;\n        if (activeElement?.tagName === 'IFRAME' || activeElement?.tagName === 'WEBVIEW') {\n          const event = new CustomEvent(FUI_FRAME_EVENT, { bubbles: true });\n          activeElement.dispatchEvent(event);\n        }\n      }, pollDuration);\n    }\n    return () => {\n      targetDocument?.defaultView?.clearTimeout(timeoutRef.current);\n    };\n  }, [targetDocument, enableFrameFocusDispatch, pollDuration]);\n};\n"],"mappings":"AAAA,OAAO,KAAKA,KAAK,MAAM,OAAO;AAE9B,OAAO,IAAMC,eAAe,GAAG,eAAe;;AAE9C;AACA;AACA;AACA,OAAO,IAAMC,sBAAsB,GAAG,SAAzBA,sBAAsBA,CACjCC,wBAAiC,EACjCC,cAAwB,EACxBC,YAAoB,EACjB;EAAA,IADHA,YAAoB;IAApBA,YAAoB,GAAG,IAAI;EAAA;EAE3B,IAAMC,UAAU,GAAGN,KAAK,CAACO,MAAM,CAAS,CAAC;EAEzCP,KAAK,CAACQ,SAAS,CAAC,YAAM;IACpB,IAAIL,wBAAwB,EAAE;MAAA,IAAAM,qBAAA;MAC5BH,UAAU,CAACI,OAAO,GAAGN,cAAc,qBAAAK,qBAAA,GAAdL,cAAc,CAAEO,WAAW,qBAA3BF,qBAAA,CAA6BG,WAAW,CAAC,YAAM;QAClE,IAAMC,aAAa,GAAGT,cAAc,oBAAdA,cAAc,CAAES,aAAa;QACnD,IAAI,CAAAA,aAAa,oBAAbA,aAAa,CAAEC,OAAO,MAAK,QAAQ,IAAI,CAAAD,aAAa,oBAAbA,aAAa,CAAEC,OAAO,MAAK,SAAS,EAAE;UAC/E,IAAMC,KAAK,GAAG,IAAIC,WAAW,CAACf,eAAe,EAAE;YAAEgB,OAAO,EAAE;UAAK,CAAC,CAAC;UACjEJ,aAAa,CAACK,aAAa,CAACH,KAAK,CAAC;QACpC;MACF,CAAC,EAAEV,YAAY,CAAC;IAClB;IACA,OAAO,YAAM;MAAA,IAAAc,sBAAA;MACXf,cAAc,qBAAAe,sBAAA,GAAdf,cAAc,CAAEO,WAAW,qBAA3BQ,sBAAA,CAA6BC,YAAY,CAACd,UAAU,CAACI,OAAO,CAAC;IAC/D,CAAC;EACH,CAAC,EAAE,CAACN,cAAc,EAAED,wBAAwB,EAAEE,YAAY,CAAC,CAAC;AAC9D,CAAC"}