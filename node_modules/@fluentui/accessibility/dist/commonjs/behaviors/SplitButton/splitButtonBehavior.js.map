{"version":3,"file":"splitButtonBehavior.js","names":["_keyboardKey","require","_attributes","_menuButtonBehavior","splitButtonBehavior","props","_toggleButton","splitButtonMenuButtonBehavior","menuButtonBehaviorData","menuButtonBehavior","attributes","trigger","undefined","_merge2","default","keyActions","popup","closeAndFocusTrigger","keyCombinations","keyCode","keyboardKey","Escape","ArrowUp","altKey","stopPropagation","ArrowLeft","ArrowRight","root","Object","assign","open","openAndFocusFirst","ArrowDown","toggleButton","tabIndex","IS_FOCUSABLE_ATTRIBUTE","childBehaviors","menuButton","exports"],"sources":["behaviors/SplitButton/splitButtonBehavior.ts"],"sourcesContent":["import { keyboardKey } from '../../keyboard-key';\nimport * as _ from 'lodash';\n\nimport { IS_FOCUSABLE_ATTRIBUTE } from '../../attributes';\nimport { Accessibility } from '../../types';\nimport { menuButtonBehavior, MenuButtonBehaviorProps } from '../MenuButton/menuButtonBehavior';\n\n/**\n * @description\n * Adds attribute 'tabIndex=-1' based on the property 'open' to 'trigger' slot.\n * Adds attribute 'aria-controls=menu-id' based on the property 'open' to 'trigger' slot.\n * Adds attribute 'aria-expanded=true' based on the property 'open' to 'trigger' slot.\n * Adds attribute 'id=trigger-id' based on the property 'triggerId' to 'trigger' slot.\n * Adds attribute 'id=menu-id' based on the property 'menuId' to 'menu' slot.\n * Adds attribute 'aria-labelledby=trigger-id' based on the property 'triggerId' to 'menu' slot.\n * Triggers 'closeAndFocusTrigger' action with 'Escape' or 'altKey'+'ArrowUp'.\n * Triggers 'openAndFocusFirst' action with 'altKey'+'ArrowDown' on 'root' slot.\n * Triggers 'stopPropagation' action with 'ArrowLeft' or 'ArrowRight' on 'root' slot.\n *\n * @specification\n * Adds attribute 'tabIndex=-1' to 'toggleButton' slot.\n * Adds attribute 'aria-haspopup=true' to 'toggleButton' slot.\n * Adds attribute 'data-is-focusable=false' to 'toggleButton' slot.\n */\nexport const splitButtonBehavior: Accessibility = props => {\n  const splitButtonMenuButtonBehavior = () => {\n    const menuButtonBehaviorData = menuButtonBehavior(props);\n    menuButtonBehaviorData.attributes.trigger['aria-haspopup'] = undefined;\n\n    return _.merge(menuButtonBehaviorData, {\n      keyActions: {\n        popup: {\n          closeAndFocusTrigger: {\n            keyCombinations: [{ keyCode: keyboardKey.Escape }, { keyCode: keyboardKey.ArrowUp, altKey: true }],\n          },\n          stopPropagation: {\n            keyCombinations: [{ keyCode: keyboardKey.ArrowLeft }, { keyCode: keyboardKey.ArrowRight }],\n          },\n        },\n        root: {\n          ...(!props.open && {\n            openAndFocusFirst: {\n              keyCombinations: [{ keyCode: keyboardKey.ArrowDown, altKey: true }],\n            },\n          }),\n        },\n      },\n    });\n  };\n\n  return {\n    attributes: {\n      root: {},\n      toggleButton: {\n        tabIndex: -1,\n        'aria-haspopup': true,\n        [IS_FOCUSABLE_ATTRIBUTE]: false,\n      },\n    },\n    childBehaviors: {\n      menuButton: splitButtonMenuButtonBehavior,\n    },\n  };\n};\n\nexport type SplitButtonBehaviorProps = Pick<MenuButtonBehaviorProps, 'open'>;\n"],"mappings":";;;;;;AAAA,IAAAA,YAAA,GAAAC,OAAA;AAGA,IAAAC,WAAA,GAAAD,OAAA;AAEA,IAAAE,mBAAA,GAAAF,OAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO,IAAMG,mBAAkC,GAAG,SAArCA,mBAAkCA,CAAGC,KAAK,EAAI;EAAA,IAAAC,aAAA;EACzD,IAAMC,6BAA6B,GAAG,SAAhCA,6BAA6BA,CAAA,EAAS;IAC1C,IAAMC,sBAAsB,GAAG,IAAAC,sCAAkB,EAACJ,KAAK,CAAC;IACxDG,sBAAsB,CAACE,UAAU,CAACC,OAAO,CAAC,eAAe,CAAC,GAAGC,SAAS;IAEtE,OAAO,IAAAC,OAAA,CAAAC,OAAA,EAAQN,sBAAsB,EAAE;MACrCO,UAAU,EAAE;QACVC,KAAK,EAAE;UACLC,oBAAoB,EAAE;YACpBC,eAAe,EAAE,CAAC;cAAEC,OAAO,EAAEC,wBAAW,CAACC;YAAO,CAAC,EAAE;cAAEF,OAAO,EAAEC,wBAAW,CAACE,OAAO;cAAEC,MAAM,EAAE;YAAK,CAAC;UACnG,CAAC;UACDC,eAAe,EAAE;YACfN,eAAe,EAAE,CAAC;cAAEC,OAAO,EAAEC,wBAAW,CAACK;YAAU,CAAC,EAAE;cAAEN,OAAO,EAAEC,wBAAW,CAACM;YAAW,CAAC;UAC3F;QACF,CAAC;QACDC,IAAI,EAAAC,MAAA,CAAAC,MAAA,KACE,CAACxB,KAAK,CAACyB,IAAI,IAAI;UACjBC,iBAAiB,EAAE;YACjBb,eAAe,EAAE,CAAC;cAAEC,OAAO,EAAEC,wBAAW,CAACY,SAAS;cAAET,MAAM,EAAE;YAAK,CAAC;UACpE;QACF,CAAC;MAEL;IACF,CAAC,CAAC;EACJ,CAAC;EAED,OAAO;IACLb,UAAU,EAAE;MACViB,IAAI,EAAE,CAAC,CAAC;MACRM,YAAY,GAAA3B,aAAA;QACV4B,QAAQ,EAAE,CAAC,CAAC;QACZ,eAAe,EAAE;MAAI,GAAA5B,aAAA,CACpB6B,kCAAsB,IAAG,KAAK,EAAA7B,aAAA;IAEnC,CAAC;IACD8B,cAAc,EAAE;MACdC,UAAU,EAAE9B;IACd;EACF,CAAC;AACH,CAAC;AAAC+B,OAAA,CAAAlC,mBAAA,GAAAA,mBAAA"}