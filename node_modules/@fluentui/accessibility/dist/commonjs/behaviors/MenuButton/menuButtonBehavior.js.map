{"version":3,"file":"menuButtonBehavior.js","names":["_keyboardKey","require","_popupBehavior","menuButtonBehavior","props","behavior","popupBehavior","Object","assign","inline","contextMenu","_merge2","default","attributes","trigger","open","menuId","id","triggerId","tabIndex","menu","keyActions","root","closeMenu","keyCombinations","keyCode","keyboardKey","Tab","shiftKey","_includes2","on","openAndFocusFirst","ArrowDown","openAndFocusLast","ArrowUp","exports"],"sources":["behaviors/MenuButton/menuButtonBehavior.ts"],"sourcesContent":["import { keyboardKey } from '../../keyboard-key';\nimport * as _ from 'lodash';\n\nimport { Accessibility } from '../../types';\nimport { popupBehavior, PopupBehaviorProps } from '../Popup/popupBehavior';\n\n/**\n * @description\n * Implements ARIA [MenuButton](https://www.w3.org/TR/wai-aria-practices/#menubutton) design pattern.\n */\nexport const menuButtonBehavior: Accessibility<MenuButtonBehaviorProps> = props => {\n  const behavior = popupBehavior({ ...props, inline: !props.contextMenu });\n\n  return _.merge(behavior, {\n    attributes: {\n      trigger: {\n        ...(props.open && { 'aria-controls': props.menuId }),\n        ...(props.open && !props.contextMenu && { 'aria-expanded': 'true' }),\n        ...(!props.contextMenu && { 'aria-haspopup': 'true' }),\n        id: props.triggerId,\n        ...(!props.contextMenu && props.open && { tabIndex: -1 }),\n      },\n\n      menu: {\n        'aria-labelledby': props.triggerId,\n        id: props.menuId,\n      },\n    },\n    keyActions: {\n      root: {\n        ...(props.open\n          ? {\n              closeMenu: {\n                keyCombinations: [\n                  { keyCode: keyboardKey.Tab, shiftKey: false },\n                  { keyCode: keyboardKey.Tab, shiftKey: true },\n                ],\n              },\n            }\n          : _.includes(props.on, 'click') && {\n              openAndFocusFirst: {\n                keyCombinations: [{ keyCode: keyboardKey.ArrowDown }],\n              },\n              openAndFocusLast: {\n                keyCombinations: [{ keyCode: keyboardKey.ArrowUp }],\n              },\n            }),\n      },\n    },\n  });\n};\n\nexport interface MenuButtonBehaviorProps extends PopupBehaviorProps {\n  /** Indicates if dialogs's trigger is disabled. */\n  disabled?: boolean;\n  /** Defines ID of the menu element. */\n  menuId?: string;\n  /** Defines ID of the trigger element. */\n  triggerId?: string;\n  /** Defines whether popup is displayed. */\n  open?: boolean;\n  /** Determines if the MenuButton behaves as context menu */\n  contextMenu?: boolean;\n}\n"],"mappings":";;;;;;;AAAA,IAAAA,YAAA,GAAAC,OAAA;AAIA,IAAAC,cAAA,GAAAD,OAAA;AAEA;AACA;AACA;AACA;AACO,IAAME,kBAA0D,GAAG,SAA7DA,kBAA0DA,CAAGC,KAAK,EAAI;EACjF,IAAMC,QAAQ,GAAG,IAAAC,4BAAa,EAAAC,MAAA,CAAAC,MAAA,KAAMJ,KAAK;IAAEK,MAAM,EAAE,CAACL,KAAK,CAACM;EAAW,EAAE,CAAC;EAExE,OAAO,IAAAC,OAAA,CAAAC,OAAA,EAAQP,QAAQ,EAAE;IACvBQ,UAAU,EAAE;MACVC,OAAO,EAAAP,MAAA,CAAAC,MAAA,KACDJ,KAAK,CAACW,IAAI,IAAI;QAAE,eAAe,EAAEX,KAAK,CAACY;MAAO,CAAC,EAC/CZ,KAAK,CAACW,IAAI,IAAI,CAACX,KAAK,CAACM,WAAW,IAAI;QAAE,eAAe,EAAE;MAAO,CAAC,EAC/D,CAACN,KAAK,CAACM,WAAW,IAAI;QAAE,eAAe,EAAE;MAAO,CAAC;QACrDO,EAAE,EAAEb,KAAK,CAACc;MAAS,GACf,CAACd,KAAK,CAACM,WAAW,IAAIN,KAAK,CAACW,IAAI,IAAI;QAAEI,QAAQ,EAAE,CAAC;MAAE,CAAC,CACzD;MAEDC,IAAI,EAAE;QACJ,iBAAiB,EAAEhB,KAAK,CAACc,SAAS;QAClCD,EAAE,EAAEb,KAAK,CAACY;MACZ;IACF,CAAC;IACDK,UAAU,EAAE;MACVC,IAAI,EAAAf,MAAA,CAAAC,MAAA,KACEJ,KAAK,CAACW,IAAI,GACV;QACEQ,SAAS,EAAE;UACTC,eAAe,EAAE,CACf;YAAEC,OAAO,EAAEC,wBAAW,CAACC,GAAG;YAAEC,QAAQ,EAAE;UAAM,CAAC,EAC7C;YAAEH,OAAO,EAAEC,wBAAW,CAACC,GAAG;YAAEC,QAAQ,EAAE;UAAK,CAAC;QAEhD;MACF,CAAC,GACD,IAAAC,UAAA,CAAAjB,OAAA,EAAWR,KAAK,CAAC0B,EAAE,EAAE,OAAO,CAAC,IAAI;QAC/BC,iBAAiB,EAAE;UACjBP,eAAe,EAAE,CAAC;YAAEC,OAAO,EAAEC,wBAAW,CAACM;UAAU,CAAC;QACtD,CAAC;QACDC,gBAAgB,EAAE;UAChBT,eAAe,EAAE,CAAC;YAAEC,OAAO,EAAEC,wBAAW,CAACQ;UAAQ,CAAC;QACpD;MACF,CAAC;IAET;EACF,CAAC,CAAC;AACJ,CAAC;AAACC,OAAA,CAAAhC,kBAAA,GAAAA,kBAAA"}