(window.webpackJsonp_4df9bb86_ab0a_4aab_ab5f_48bf167048fb_1_17_1=window.webpackJsonp_4df9bb86_ab0a_4aab_ab5f_48bf167048fb_1_17_1||[]).push([[1],{oPyX:function(e,t,n){"use strict";n.r(t);var a=n("ut3N"),i=n("UWqr"),r=function(){function e(t,n,a,r,o,s,c){i.Validate.isNonemptyString(t,"id"),i.Validate.isNotNullOrUndefined(r,"executor"),i.Validate.isNotNullOrUndefined(o,"validator"),this._id=t,this._executor=r,this._dataValidator=o,this._refreshThreshold=s||e.refreshThresholdMs,this._maxStoreSize=c||e.maxStoreSize;var d=e._initStore(t,this._maxStoreSize,n,a);this._buildMinHeap(d)}return e._leftChild=function(e){return 2*e+1},e._rightChild=function(e){return 2*e+2},e._parent=function(e){return Math.floor((e-1)/2)},e._swap=function(e,t,n){var a=e[n];e[n]=e[t],e[t]=a},e._generateItemCacheKey=function(){return"spfx-ndsi-".concat(Date.now(),"-").concat(Math.floor(1e3*Math.random()))},e._fetchSessionCacheEntry=function(t){var n=void 0;try{var a=t.itemReference;if(a&&a.length>0){var i=sessionStorage.getItem(a);if(i&&i.length>0){var r=JSON.parse(i);r&&e._normalizeUrl(r.url)===e._normalizeUrl(t.url)&&(n=r)}}}catch(e){}return n},e._fetchItemData=function(t,n){var a=e._fetchSessionCacheEntry(t);if(a&&a.payload)return{navData:a.payload.navData,data:n&&a.payload.data?a.payload.data:void 0}},e._upsertItemData=function(t,n,a){var i=e._fetchSessionCacheEntry(t);if(i&&i.payload)a?i.payload.navData=n:i.payload.data=n,e._updateStore(t.itemReference,i);else{var r={navData:a?n:void 0,data:a?void 0:n},o={url:t.url,payload:r},s=e._generateItemCacheKey();e._updateStore(s,o),t.itemReference=s}},e._removeItemEntries=function(e){Array.isArray(e)&&e.length>0&&e.forEach(function(e){e&&e.itemReference&&e.itemReference.length>0&&sessionStorage.removeItem(e.itemReference)})},e._initStore=function(t,n,a,i){var r=[];try{var o=sessionStorage.getItem(a);i!==o&&sessionStorage.setItem(a,i);var s=sessionStorage.getItem(t);if(s&&s.length>0){var c=JSON.parse(s);if(Array.isArray(c)&&c.length>0){r=c;var d=i!==o?c.length:n;if(r.length>n||i!==o){var l=r.splice(d);e._removeItemEntries(l)}if(i!==o)return sessionStorage.removeItem(t),[]}}}catch(e){}return r},e._updateStore=function(e,t){try{sessionStorage.setItem(e,JSON.stringify(t))}catch(e){}},e._generatePreloadHeaders=function(e){var t=new Headers;return e&&e.isPrefetchRequest&&t.append("X-RequestPrefetchLink","1"),window.__spfxMark&&t.append("X-Service-Worker-In-Place-Nav","true"),t},e._generatePrefetchHeaders=function(e){var t=new Headers;return t.append("X-RequestPrefetchData","1"),e&&e.isPrefetchRequest&&t.append("X-RequestPrefetchLink","1"),t},e._normalizeUrl=function(e){return e&&e.toLowerCase()},Object.defineProperty(e.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"items",{get:function(){return this._store.items},enumerable:!1,configurable:!0}),e.prototype.getData=function(t,n){i.Validate.isNonemptyString(t,"url");var a=void 0,r=-1;if(n&&n.enableCache){var o=this._findItem(t);if(a=o.item,r=o.index,a&&a.fetchedTime){var s=Date.now()-this._refreshThreshold;if(!(a.fetchedTime<=s)){n.isPrefetchRequest||(a.accessedTime=Date.now(),this._heapify(r),e._updateStore(this._id,this._store.items));var c=e._fetchItemData(a,n.enableDataPrefetch);if(c&&c.navData){var d=Promise.resolve(c.navData),l=n.enableDataPrefetch?Promise.resolve(c.data):void 0;return Promise.resolve({preloadedData:d,prefetchedData:l})}}}}return this._fetchData(t,n,a,r)},e.prototype.remove=function(t){var n=!1;if(t instanceof RegExp)n=this._removeMatching(t);else{var a=this._findItem(t);if(a.index>-1){var i=this._store.items.splice(a.index,1);e._removeItemEntries(i),n=!0}}n&&(this._buildMinHeap(this._store.items),e._updateStore(this._id,this._store.items))},e.prototype._removeMatching=function(t){t=new RegExp(e._normalizeUrl(t.source),"i");var n=!1,a=-1,i=this._store.size,r=[];for(a=0;a<i;a++){var o=this._store.items[a];if(o&&t.test(e._normalizeUrl(o.url))){var s=this._store.items.splice(a,1);s&&r.push.apply(r,s),a--,i--,n=!0}}return e._removeItemEntries(r),n},e.prototype._addOrUpdateCacheEntry=function(t,n,a,i){if(i&&i.item)a?(i.item.fetchedTime=Date.now(),i.item.accessedTime=i.item.fetchedTime,e._upsertItemData(i.item,n,!0),this._heapify(i.index)):e._upsertItemData(i.item,n,!1);else{var r=this._findItem(t);if(r.item)e._upsertItemData(r.item,n,a);else{try{new RegExp(t)}catch(e){return}var o=Date.now(),s={accessedTime:o,fetchedTime:o,url:t};e._upsertItemData(s,n,a),this._insert(s)}}e._updateStore(this._id,this._store.items)},e.prototype._fetchData=function(t,n,i,r){var o=this,s=this._executor(t,e._generatePreloadHeaders(n)).then(function(e){if(o._dataValidator(e),n&&n.enableCache){var a=i?{item:i,index:r}:void 0;o._addOrUpdateCacheEntry(t,e,!0,a)}return e}),c=void 0;if(n&&n.enableDataPrefetch){var d=new a._QosMonitor("NavigationDataStore.fetchAppData");c=this._executor(t,e._generatePrefetchHeaders(n)).then(function(e){var n=i?{item:i,index:r}:void 0;return o._addOrUpdateCacheEntry(t,e,!1,n),d.writeSuccess(),e}).catch(function(e){throw d.writeUnexpectedFailure(e),e})}return Promise.resolve({preloadedData:s,prefetchedData:c})},e.prototype._heapify=function(t){var n=e._leftChild(t),a=e._rightChild(t),i=void 0;i=n<this._store.size&&this._store.items[n].accessedTime<this._store.items[t].accessedTime?n:t,a<this._store.size&&this._store.items[a].accessedTime<this._store.items[i].accessedTime&&(i=a),i!==t&&(e._swap(this._store.items,t,i),this._heapify(i))},e.prototype._extractMin=function(){if(!(this._store.size<1)){var t=this._store.items[0];this._store.items[0]=this._store.items[this._store.size-1],this._store.size-=1,this._heapify(0);var n=this._store.items.splice(this._store.size);return e._removeItemEntries(n),t}},e.prototype._reduceKey=function(t,n){for(this._store.items[t]=n;t>=0&&this._store.items[e._parent(t)]<this._store.items[t];)e._swap(this._store.items,t,e._parent(t)),t=e._parent(t)},e.prototype._insert=function(e){this._store.size===this._maxStoreSize&&this._extractMin(),this._store.size+=1,this._reduceKey(this._store.size-1,e)},e.prototype._buildMinHeap=function(e){this._store={items:e,size:e.length};for(var t=Math.floor(this._store.size/2);t>=0;t--)this._heapify(t)},e.prototype._findItem=function(t){var n=void 0,a=-1;for(a=0;a<this._store.size;a++){var i=this._store.items[a];if(i&&e._normalizeUrl(i.url)===e._normalizeUrl(t)){n=i;break}}return{item:n,index:void 0===n?-1:a}},e.refreshThresholdMs=6e5,e.maxStoreSize=15,e}();t.default=r}}]);